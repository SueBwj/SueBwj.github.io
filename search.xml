<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>null_kv cls_token</title>
      <link href="/2025/09/null-kv/"/>
      <url>/2025/09/null-kv/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•æ¥è¯´ï¼Œnk å’Œ nv å…±åŒç»„æˆäº†ä¸€ä¸ªå¯å­¦ä¹ çš„ â€œç©ºâ€ä»¤ç‰Œï¼ˆnull tokenï¼‰ æˆ– â€œå“¨å…µâ€ä»¤ç‰Œï¼ˆsentinel tokenï¼‰ã€‚è¿™ä¸ªç‰¹æ®Šçš„ä»¤ç‰Œä¸æ¥è‡ªä»»ä½•è¾“å…¥ï¼Œè€Œæ˜¯ä½œä¸ºæ¨¡å‹çš„ä¸€ä¸ªå†…ç½®å‚æ•°ï¼Œåœ¨æ¯æ¬¡æ³¨æ„åŠ›è®¡ç®—æ—¶è¢«åŠ¨æ€æ·»åŠ åˆ°åºåˆ—çš„å¼€å¤´ã€‚</p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.null_kv = nn.Parameter(torch.randn(<span class="number">2</span>, heads, <span class="number">1</span>, dim_head))</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ 2ï¼Œ åˆ†åˆ«ä»£è¡¨ key(k) å’Œ value(v)</li><li>1 ä»£è¡¨è¿™æ˜¯é•¿åº¦ä¸º 1 çš„åºåˆ—ï¼Œå³å•ä¸ªä»¤ç‰Œ</li></ul><h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 1. è§£åŒ…æˆ nk (null key) å’Œ nv (null value)</span></span><br><span class="line">nk, nv = self.null_kv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å¤åˆ¶ä»¥åŒ¹é…æ‰¹æ¬¡å¤§å° (batch size)</span></span><br><span class="line">nk, nv = <span class="built_in">map</span>(<span class="keyword">lambda</span> t: repeat(t, <span class="string">&#x27;h 1 d -&gt; b h 1 d&#x27;</span>, b=x.shape[<span class="number">0</span>]), (nk, nv))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å°† nk å’Œ nv æ‹¼æ¥åˆ°çœŸå® key å’Œ value åºåˆ—çš„å¼€å¤´</span></span><br><span class="line">k = torch.cat((nk, k), dim=-<span class="number">2</span>)</span><br><span class="line">v = torch.cat((nv, v), dim=-<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒç›®çš„"><a href="#æ ¸å¿ƒç›®çš„" class="headerlink" title="æ ¸å¿ƒç›®çš„"></a>æ ¸å¿ƒç›®çš„</h3><p>å¼•å…¥è¿™æ ·ä¸€ä¸ªâ€œç©ºâ€ä»¤ç‰Œä¸»è¦æœ‰ä¸¤ä¸ªæ ¸å¿ƒç›®çš„ï¼Œè¿™è®©æ¨¡å‹å˜å¾—æ›´åŠ çµæ´»å’Œå¼ºå¤§ï¼š</p><ol><li><strong>ä½œä¸ºâ€œä¿¡æ¯æ± â€æˆ–â€œç©ºæ“ä½œâ€ (Information Sink / No-Op)</strong><br>æƒ³è±¡ä¸€ä¸‹ï¼Œåºåˆ—ä¸­çš„æŸä¸ªæŸ¥è¯¢ä»¤ç‰Œï¼ˆqueryï¼‰å¯èƒ½åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­æ‰¾ä¸åˆ°ä»»ä½•ä¸ä¹‹å¼ºç›¸å…³çš„å…¶ä»–ä»¤ç‰Œã€‚å¦‚æœæ²¡æœ‰ null_kvï¼Œå®ƒä»ç„¶å¿…é¡»å°†æ³¨æ„åŠ›æƒé‡åˆ†é…ç»™åºåˆ—ä¸­çš„å…¶ä»–é¡¹ã€‚</li></ol><ul><li><p>æä¾›ä¸€ä¸ªâ€œæ— å¤„å¯å»â€æ—¶çš„é€‰æ‹©ï¼šnull_kv æä¾›äº†ä¸€ä¸ªâ€œæ— æ‰€è°“â€æˆ–â€œä»¥ä¸Šéƒ½ä¸æ˜¯â€çš„é€‰é¡¹ã€‚å½“ä¸€ä¸ª query ä¸éœ€è¦ä»åºåˆ—ä¸­ä»»ä½•ç‰¹å®šéƒ¨åˆ†æå–ä¿¡æ¯æ—¶ï¼Œå®ƒå¯ä»¥å°†å¤§éƒ¨åˆ†æ³¨æ„åŠ›æƒé‡åˆ†é…ç»™è¿™ä¸ªâ€œç©ºâ€ä»¤ç‰Œã€‚</p></li><li><p>å……å½“ä¿¡æ¯â€œåƒåœ¾æ¡¶â€ï¼šè¿™å…è®¸æ¨¡å‹æœ‰æ•ˆåœ°æ‰§è¡Œâ€œç©ºæ“ä½œâ€ï¼ˆNo-Operationï¼‰ï¼Œå³é€‰æ‹©æ€§åœ°å¿½ç•¥å½“å‰ä¸Šä¸‹æ–‡ï¼Œè€Œä¸æ˜¯è¢«è¿«æ•´åˆä¸ç›¸å…³çš„ä¿¡æ¯ã€‚è¿™åœ¨å¤„ç†åŒ…å«å™ªå£°æˆ–ä¸é‡è¦å…ƒç´ çš„åºåˆ—æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p></li></ul><ol><li><strong>ä½œä¸ºâ€œå…¨å±€ä¿¡æ¯åº“â€ (Global Information Repository)</strong><br>ç”±äº null_kv æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çš„å‚æ•°ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å…·ä½“è¾“å…¥ã€‚åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹å¯ä»¥å­¦ä¼šå°†ä¸€äº›å…¨å±€çš„ã€ä¸ä¸Šä¸‹æ–‡æ— å…³çš„â€œçŸ¥è¯†â€æˆ–â€œåç½®â€å­˜å‚¨åœ¨ nv (null value) ä¸­ã€‚</li></ol><ul><li><p>å¯å­¦ä¹ çš„å…¨å±€å†…å­˜ï¼šä»»ä½•ä½ç½®çš„ query éƒ½å¯ä»¥é€šè¿‡å…³æ³¨ nk (null key) æ¥ä» nv ä¸­è¯»å–è¿™äº›å­˜å‚¨å¥½çš„å…¨å±€ä¿¡æ¯ã€‚</p></li><li><p>ç±»æ¯”ï¼šä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå°çš„ã€å¯è¯»å†™çš„â€œå‰ªè´´æ¿â€æˆ–â€œè‰ç¨¿çº¸â€ã€‚æ¨¡å‹åœ¨ä¸Šé¢è®°å½•äº†ä¸€äº›æ™®éæœ‰ç”¨çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ä»»åŠ¡ç±»å‹ã€é€šç”¨ç‰¹å¾ç­‰ï¼‰ï¼Œåºåˆ—ä¸­çš„ä»»ä½•ä»¤ç‰Œéƒ½å¯ä»¥éšæ—¶æŸ¥é˜…ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Null_kv </tag>
            
            <tag> cls_token </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Token-Critic</title>
      <link href="/2025/09/Token-Critic/"/>
      <url>/2025/09/Token-Critic/</url>
      
        <content type="html"><![CDATA[<h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>Token-Critic ç”¨æ¥åˆ¤æ–­ which visual tokens belong to the original image and which were sampled by the generative transformer. åœ¨éè‡ªå›å½’çš„ç”Ÿæˆä¸­çŸ¥é“å“ªäº› tokens éœ€è¦ä¿ç•™å“ªäº› tokens éœ€è¦è¢«æ›¿æ¢æ˜¯ä¸€ä»¶æ¯”è¾ƒå›°éš¾çš„äº‹æƒ…ï¼Œæ‰€ä»¥ token-critic (ä¸€ä¸ª transformer æ¨¡å‹) è¢«æå‡ºç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br><img src="/images/token-critic.png" alt="token-critic"></p><p>Token-Critic è§£å†³äº†ä¸‰ä¸ªå…³é”®çš„é™åˆ¶é—®é¢˜ï¼š</p><ol><li><p><strong>token æ©ç å§”æ‰˜ç»™ Token-Critic æ¨¡å‹</strong></p><ul><li>Token-Critic æ¨¡å‹ç»è¿‡è®­ç»ƒï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº› token å±äºçœŸå®åˆ†å¸ƒï¼Œå“ªäº›ä¸å±äº</li><li>å®ƒå­¦ä¹ åˆ¤æ–­æ¯ä¸ª visual token çš„è´¨é‡å’ŒçœŸå®æ€§</li></ul></li><li><p><strong>è¿­ä»£é‡‡æ ·è¿‡ç¨‹ä¸­çš„ç²¾ç¡®æ©ç </strong></p><ul><li>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼ŒToken-Critic ä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒé‡‡æ ·çš„ tokenï¼Œè€Œæ˜¯èƒ½å¤Ÿç²¾ç¡®åœ°è¯†åˆ«å‡ºè´¨é‡è¾ƒå·®çš„ token</li><li>è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿä¿ç•™é«˜è´¨é‡çš„ç”Ÿæˆ tokenï¼ŒåŒæ—¶æ›¿æ¢æ‰ä¸ç¬¦åˆçœŸå®åˆ†å¸ƒçš„ token</li></ul></li><li><p><strong>æ”¹è¿›çš„é‡‡æ ·ç¨‹åº</strong></p><ul><li>ä¼ ç»Ÿæ–¹æ³•å¯èƒ½ä¼šåœ¨è¿­ä»£è§£ç è¿‡ç¨‹ä¸­é”™è¯¯åœ°ä¸¢å¼ƒå·²ç»æ­£ç¡®é‡‡æ ·çš„ token</li><li>Token-Critic é€šè¿‡ç²¾ç¡®çš„è´¨é‡è¯„ä¼°ï¼Œé¿å…äº†è¿™ç§è¯¯åˆ é™¤ï¼Œä»è€Œæå‡äº†æ•´ä½“ç”Ÿæˆè´¨é‡</li></ul></li></ol><h3 id="Token-Critic-çš„ç»“æ„"><a href="#Token-Critic-çš„ç»“æ„" class="headerlink" title="Token-Critic çš„ç»“æ„"></a>Token-Critic çš„ç»“æ„</h3><p>Transformer ç»“æ„ï¼Œè¾“å‡ºçš„ç»“æœä¸ºæ¯ä¸ª token çš„å¾—åˆ†ï¼Œè¡¨ç¤ºåœ¨æ ¹æ® condition çš„æƒ…å†µä¸‹ç”Ÿæˆçš„ token çš„è´¨é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> einops <span class="keyword">import</span> rearrange</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exists</span>(<span class="params">val</span>):</span><br><span class="line">    <span class="keyword">return</span> val <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SelfCritic</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, net</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.net = net</span><br><span class="line">        self.to_pred = nn.Linear(net.dim, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward_with_cond_scale</span>(<span class="params">self, x, *args, **kwargs</span>):</span><br><span class="line">        _, embeds = self.net.forward_with_cond_scale(</span><br><span class="line">            x, *args, return_embed=<span class="literal">True</span>, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> self.to_pred(embeds)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward_with_neg_prompt</span>(<span class="params">self, x, *args, **kwargs</span>):</span><br><span class="line">        _, embeds = self.net.forward_with_neg_prompt(</span><br><span class="line">            x, *args, return_embed=<span class="literal">True</span>, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> self.to_pred(embeds)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, *args, labels=<span class="literal">None</span>, **kwargs</span>):</span><br><span class="line">        _, embeds = self.net(x, *args, return_embed=<span class="literal">True</span>, **kwargs)</span><br><span class="line">        logits = self.to_pred(embeds)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> exists(labels):</span><br><span class="line">            <span class="keyword">return</span> logits</span><br><span class="line"></span><br><span class="line">        logits = rearrange(logits, <span class="string">&#x27;... 1 -&gt; ...&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> F.binary_cross_entropy_with_logits(logits, labels)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Token-Critic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python-@beartype</title>
      <link href="/2025/09/python-beartype/"/>
      <url>/2025/09/python-beartype/</url>
      
        <content type="html"><![CDATA[<p>@beartype æ˜¯ Python é‡Œçš„ä¸€ä¸ª å‡½æ•°/æ–¹æ³•/ç±»çš„è£…é¥°å™¨ï¼Œæ¥è‡ª <a href="https://github.com/beartype/beartype?utm_source=chatgpt.com">beartype åº“</a>ï¼Œç”¨äº è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€‚</p><h3 id="ğŸ”¹-ç®€å•è§£é‡Š"><a href="#ğŸ”¹-ç®€å•è§£é‡Š" class="headerlink" title="ğŸ”¹ ç®€å•è§£é‡Š"></a>ğŸ”¹ ç®€å•è§£é‡Š</h3><p>åœ¨ Python é‡Œæˆ‘ä»¬é€šå¸¸ç”¨ ç±»å‹æ³¨è§£ï¼ˆtype hintsï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">int</span>, y: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Python æœ¬èº«ä¸ä¼šå¼ºåˆ¶æ£€æŸ¥ç±»å‹ï¼ˆadd(â€œaâ€, â€œbâ€) ä¹Ÿèƒ½è·‘ï¼‰ã€‚<br>beartype å°±æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ£€æŸ¥å·¥å…·ï¼Œå¯ä»¥è®©è¿™äº›ç±»å‹æ³¨è§£ çœŸæ­£ç”Ÿæ•ˆï¼Œåœ¨è°ƒç”¨æ—¶éªŒè¯è¾“å…¥è¾“å‡ºæ˜¯å¦ç¬¦åˆæ³¨è§£ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> beartype <span class="keyword">import</span> beartype</span><br><span class="line"></span><br><span class="line"><span class="meta">@beartype</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">concat</span>(<span class="params">a: <span class="built_in">str</span>, b: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(concat(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>))  <span class="comment"># âœ… æ­£å¸¸</span></span><br><span class="line"><span class="built_in">print</span>(concat(<span class="string">&quot;hello&quot;</span>, <span class="number">123</span>))      <span class="comment"># âŒ TypeError</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ”¯æŒçš„åŠŸèƒ½"><a href="#æ”¯æŒçš„åŠŸèƒ½" class="headerlink" title="æ”¯æŒçš„åŠŸèƒ½"></a>æ”¯æŒçš„åŠŸèƒ½</h3><p>âœ… æ£€æŸ¥å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹</p><p>âœ… æ”¯æŒ List[int], Tuple[str, int], Optional[float] ç­‰å¤æ‚æ³¨è§£</p><p>âœ… æ”¯æŒç±»å’Œæ–¹æ³•</p><p>âœ… å‡ºé”™æ—¶ä¼šç»™å‡ºæ¸…æ™°çš„æŠ¥é”™ä¿¡æ¯</p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python-einops</title>
      <link href="/2025/09/python-einops/"/>
      <url>/2025/09/python-einops/</url>
      
        <content type="html"><![CDATA[<h3 id="what-is-einops"><a href="#what-is-einops" class="headerlink" title="what is einops"></a>what is einops</h3><p>einops æ˜¯ä¸€ä¸ªç”¨äºå¼ é‡æ“ä½œçš„ Python åº“ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ç§æ›´ç›´è§‚ã€æ›´å£°æ˜æ€§çš„æ–¹å¼æ¥é‡å¡‘ã€è½¬ç½®å’Œæ‰§è¡Œå…¶ä»–å¤šç»´æ•°ç»„æ“ä½œã€‚å®ƒçš„åå­—æ˜¯ â€œEinstein operationsâ€ çš„ç¼©å†™ï¼Œå› ä¸ºå®ƒå—åˆ°çˆ±å› æ–¯å¦æ±‚å’Œçº¦å®šï¼ˆEinstein summation notationï¼‰çš„å¯å‘ã€‚</p><h3 id="einops-çš„ç”¨æ³•"><a href="#einops-çš„ç”¨æ³•" class="headerlink" title="einops çš„ç”¨æ³•"></a>einops çš„ç”¨æ³•</h3><p>ä¼ ç»Ÿä¸Šï¼Œåœ¨ NumPyã€PyTorchã€TensorFlow ç­‰åº“ä¸­è¿›è¡Œå¼ é‡æ“ä½œï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ç³»åˆ—å‡½æ•°ï¼Œæ¯”å¦‚ <code>reshape</code>, <code>transpose</code>, <code>permute</code>, <code>view</code> ç­‰ã€‚è¿™å¾ˆå®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯å½“å¼ é‡çš„ç»´åº¦å¾ˆå¤šæ—¶ï¼Œä½ å¯èƒ½ä¼šæ··æ·†è½´çš„é¡ºåºå’Œå¤§å°ã€‚</p><p>einops é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„ã€é«˜å¯è¯»æ€§çš„è¡¨è¾¾å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„æ ¸å¿ƒå‡½æ•°æ˜¯ <code>rearrange</code>, <code>reduce</code> å’Œ <code>repeat</code>ã€‚</p><ol><li><p><code>rearrange</code><br>è¿™æ˜¯ einops æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œå®ƒç»“åˆäº† é‡å¡‘ (reshape) å’Œ è½¬ç½® (transpose) çš„åŠŸèƒ½ã€‚å®ƒçš„è¯­æ³•éå¸¸ç›´è§‚ï¼šeinops.rearrange(tensor, â€˜â€¦ -&gt; â€¦â€™)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> einops</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">tensor = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(einops.rearrange(tensor, <span class="string">&#x27;b c h w -&gt; b h w c&#x27;</span>))</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå°†å½¢çŠ¶ä¸º (batch, channels, height, width) çš„å›¾åƒåˆ†å‰²æˆä¸é‡å çš„å°å—ï¼ˆpatchï¼‰ï¼Œå¹¶å±•å¹³ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡è®¾ patch å¤§å°æ˜¯ 16x16</span></span><br><span class="line"><span class="built_in">print</span>(einops.rearrange(img, <span class="string">&#x27;b c (h p1) (w p2) -&gt; b (h w) (p1 p2 c)&#x27;</span>, p1=<span class="number">16</span>, p2=<span class="number">16</span>))</span><br></pre></td></tr></table></figure></li><li><p><code>reduce</code><br>è¿™ä¸ªå‡½æ•°ç”¨äºæ‰§è¡Œå„ç§å¸¸è§çš„èšåˆæ“ä½œï¼Œæ¯”å¦‚æ±‚å’Œã€æ±‚å¹³å‡ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰ã€‚å®ƒçš„è¯­æ³•æ˜¯ï¼šeinops.reduce(tensor, â€˜â€¦ -&gt; â€¦â€™, â€˜opâ€™)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> einops <span class="keyword">import</span> reduce</span><br><span class="line">output_tensor = reduce(input_tensor, <span class="string">&#x27;b c h w -&gt; c&#x27;</span>, <span class="string">&#x27;mean&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¡¨è¾¾å¼è¡¨ç¤ºå°† b, h, w ç»´åº¦æ±‚å¹³å‡ï¼Œåªä¿ç•™ c ç»´åº¦ã€‚</p></li><li><p><code>repeat</code><br>è¿™ä¸ªå‡½æ•°ç”¨äºé‡å¤å¼ é‡çš„æŸäº›ç»´åº¦ï¼Œå®ƒçš„è¯­æ³•æ˜¯ï¼šeinops.repeat(tensor, â€˜â€¦ -&gt; â€¦â€™, **kwargs)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> einops <span class="keyword">import</span> repeat</span><br><span class="line">output_tensor = repeat(img, <span class="string">&#x27;h w -&gt; h w 3&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å°†ä¸€ä¸ªå½¢çŠ¶ä¸º (height, width) çš„ç°åº¦å›¾åƒå¤åˆ¶æˆ 3 ä¸ªé€šé“ã€‚</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æœºè¯•è€ƒå‰å¤ä¹ </title>
      <link href="/2025/08/%E6%9C%BA%E8%AF%95%E8%80%83%E5%89%8D%E5%A4%8D%E4%B9%A0/"/>
      <url>/2025/08/%E6%9C%BA%E8%AF%95%E8%80%83%E5%89%8D%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h3 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><details><summary> é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ¯kä¸ªä¸€ç»„ç¿»è½¬ </summary>[ç‰›å®¢](https://www.nowcoder.com/practice/b49c3dc907814e9bbfa8437c251b028e?tpId=295&tqId=722&sourceUrl=%2Fexam%2Foj%3FquestionJobId%3D10%26subTabName%3Donline_coding_page)<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *int val;</span></span><br><span class="line"><span class="comment"> *struct ListNode *next;</span></span><br><span class="line"><span class="comment"> *ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param head ListNodeç±»</span></span><br><span class="line"><span class="comment">     * @param k intæ•´å‹</span></span><br><span class="line"><span class="comment">     * @return ListNodeç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseKGroup</span><span class="params">(ListNode* head, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write code here</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; list;</span><br><span class="line">        ListNode* node = head;</span><br><span class="line">        <span class="keyword">while</span>(node)&#123;</span><br><span class="line">            list.<span class="built_in">push_back</span>(node-&gt;val);</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> l = <span class="number">0</span>, r = k<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(r &lt; list.<span class="built_in">size</span>())&#123;</span><br><span class="line">            <span class="type">int</span> i = l, j = r;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">                <span class="type">int</span> tmp = list[i];</span><br><span class="line">                list[i] = list[j];</span><br><span class="line">                list[j] = tmp;</span><br><span class="line">                i++; j--;</span><br><span class="line">            &#125;</span><br><span class="line">            l = l + k;</span><br><span class="line">            r = r + k;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ListNode* dummyhead = <span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        ListNode* newHead = dummyhead;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num : list)&#123;</span><br><span class="line">            newHead-&gt;next = <span class="keyword">new</span> <span class="built_in">ListNode</span>(num);</span><br><span class="line">            newHead = newHead-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummyhead-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><details><summary>å¿«é€Ÿæ’åº</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> arr[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quicksort</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’ç»ˆæ­¢æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†æˆå­é—®é¢˜</span></span><br><span class="line">    <span class="type">int</span> i = l<span class="number">-1</span>, j = r+<span class="number">1</span>, x = arr[(l + r) &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(arr[i] &lt; x);</span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(arr[j] &gt; x);</span><br><span class="line">        <span class="keyword">if</span>(i &lt; j) <span class="built_in">swap</span>(arr[i], arr[j]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">quicksort</span>(l, j); <span class="built_in">quicksort</span>(j+<span class="number">1</span>, r);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">cin &gt;&gt; arr[i];</span><br><span class="line">&#125;</span><br><span class="line"> <span class="built_in">quicksort</span>(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><h3 id="é«˜ç²¾åº¦"><a href="#é«˜ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦"></a>é«˜ç²¾åº¦</h3><details><summary>é«˜ç²¾åº¦åŠ æ³•</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">add</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; A, vector&lt;<span class="type">int</span>&gt;&amp; B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(B.<span class="built_in">size</span>() &gt; A.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="built_in">add</span>(B, A);</span><br><span class="line">    <span class="comment">// é»˜è®¤Açš„å¤§å°æ¯”Bå¤§</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; C;</span><br><span class="line">    <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; A.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &lt; B.<span class="built_in">size</span>()) t += B[i];</span><br><span class="line">        t += A[i];</span><br><span class="line">        C.<span class="built_in">push_back</span>(t % <span class="number">10</span>);</span><br><span class="line">        t /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(t) C.<span class="built_in">push_back</span>(t);</span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; A;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; B;</span><br><span class="line">    <span class="comment">// å€’åºå­˜å…¥</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = a.<span class="built_in">size</span>()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        A.<span class="built_in">push_back</span>(a[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = b.<span class="built_in">size</span>()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        B.<span class="built_in">push_back</span>(b[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; C = <span class="built_in">add</span>(A, B);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = C.<span class="built_in">size</span>()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        cout &lt;&lt; C[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="æ•°å­¦é—®é¢˜"><a href="#æ•°å­¦é—®é¢˜" class="headerlink" title="æ•°å­¦é—®é¢˜"></a>æ•°å­¦é—®é¢˜</h3><details><summary>è¯•é™¤æ³•åˆ¤æ–­è´¨æ•°</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">prime</span><span class="params">(<span class="type">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(t &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>;i &lt;= t / i;i++)<span class="comment">//å¾ªç¯ä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œå¯ä»¥åªåˆ°t / i</span></span><br><span class="line">        <span class="keyword">if</span>(t % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>åˆ†è§£è´¨å› æ•°</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= num / i; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(num % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">2</span>; i &lt;= num / i; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">is_prime</span>(i))&#123;</span><br><span class="line">                <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(num &amp;&amp; num % i == <span class="number">0</span>)&#123;</span><br><span class="line">                    count += <span class="number">1</span>;</span><br><span class="line">                    num /= i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(count != <span class="number">0</span>) cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">1</span>) cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>æœ€å¤§å…¬çº¦æ•°</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">gcd</span>(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">gcd</span>(a, b));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><h3 id="æœç´¢ä¸å›¾è®º"><a href="#æœç´¢ä¸å›¾è®º" class="headerlink" title="æœç´¢ä¸å›¾è®º"></a>æœç´¢ä¸å›¾è®º</h3><details><summary>å»ºå›¾</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> h[N], ne[N * <span class="number">2</span>], e[N * <span class="number">2</span>], idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    e[idx] = b;</span><br><span class="line">    ne[idx] = h[a];</span><br><span class="line">    h[a] = idx++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>è®¡ç®—å­æ ‘å¤§å°</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_sz</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> parent)</span></span>&#123;</span><br><span class="line">    sz[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = h[u]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">        <span class="type">int</span> j = e[i];</span><br><span class="line">        <span class="keyword">if</span>(j != parent)&#123;</span><br><span class="line">            <span class="built_in">dfs_sz</span>(j, u);</span><br><span class="line">            sz[u] += sz[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>å›¾ä¸­ç‚¹çš„å±‚æ¬¡</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> dist[N]; <span class="comment">// dis[N]ç”¨æ¥è®¡ç®—ä»1åˆ°nç‚¹çš„è·ç¦»</span></span><br><span class="line"><span class="type">bool</span> st[N]; <span class="comment">//è¡¨ç¤ºå½“å‰çš„ç‚¹æ˜¯å¦è®¿é—®è¿‡</span></span><br><span class="line"><span class="type">int</span> h[N], ne[<span class="number">2</span> * N], e[<span class="number">2</span> * N], idx;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    e[idx] = b; ne[idx] = h[a]; h[a] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f3f3f3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    st[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="type">int</span> t = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = h[t]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">            <span class="type">int</span> j = e[i];</span><br><span class="line">            <span class="keyword">if</span>(!st[j])&#123;</span><br><span class="line">                dist[j] = dist[t] + <span class="number">1</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(j);</span><br><span class="line">                st[j] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(dist[n] &gt; <span class="number">0x3f3f3f3f</span> / <span class="number">2</span>) cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; dist[n] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">    <span class="comment">// æ„å»ºå›¾</span></span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="built_in">add</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>æ‹“æ‰‘æ’åº</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> h[N], ne[N], e[N], idx;</span><br><span class="line"><span class="type">int</span> d[N]; <span class="comment">// ç”¨æ¥å­˜å‚¨å…¥åº¦</span></span><br><span class="line">queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; path;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    e[idx] = b,  ne[idx] = h[a], h[a] = idx++;</span><br><span class="line">    d[b] += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">topsort</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="type">int</span> t = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        path.<span class="built_in">push_back</span>(t);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = h[t]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">            <span class="type">int</span> j = e[i];</span><br><span class="line">            d[j] --;</span><br><span class="line">            <span class="keyword">if</span>(d[j] == <span class="number">0</span>)&#123;</span><br><span class="line">                q.<span class="built_in">push</span>(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">add</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(d[i] == <span class="number">0</span>)&#123;</span><br><span class="line">            q.<span class="built_in">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">topsort</span>();</span><br><span class="line">    <span class="keyword">if</span>(path.<span class="built_in">size</span>() == n)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num : path)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><details><summary>è¿ªæ°æ–¯ç‰¹æ‹‰æ±‚æœ€çŸ­è·¯</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII; <span class="comment">// å­˜å‚¨ä»èŠ‚ç‚¹ 1 åˆ°å½“å‰ç‚¹çš„æœ€å°è·ç¦»</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> h[N], e[N], ne[N], w[N], idx;</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span></span>&#123;</span><br><span class="line">  e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line">  priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; q;</span><br><span class="line">  <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">  dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">  q.<span class="built_in">push</span>(&#123;<span class="number">0</span>, <span class="number">1</span>&#125;); <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œ `dist[1]` çš„å€¼å·²ç»æ˜¯ `0`</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">top</span>();</span><br><span class="line">        <span class="type">int</span> distance = t.first, ver = t.second;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(st[ver]) <span class="keyword">continue</span>;</span><br><span class="line">        st[ver] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = h[ver]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">            <span class="type">int</span> j = e[i];</span><br><span class="line">            <span class="keyword">if</span>(dist[j] &gt; dist[ver] + w[i])&#123;</span><br><span class="line">                dist[j] = dist[ver] + w[i];</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;dist[j], j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">  <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">    <span class="type">int</span> a, b, c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">    <span class="built_in">add</span>(a, b, c);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">dijkstra</span>(); <span class="comment">// ä¿®å¤ï¼šç¼ºå°‘ Dijkstra è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(dist[n] == <span class="number">0x3f3f3f3f</span>) <span class="built_in">puts</span>(<span class="string">&quot;-1&quot;</span>); <span class="comment">// ä¿®å¤ï¼šæ­£ç¡®çš„æ— ç©·å¤§åˆ¤æ–­</span></span><br><span class="line">  <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, dist[n]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details><summary>primæ±‚æœ€å°ç”Ÿæˆæ ‘</summary>https://www.acwing.com/solution/content/38312/<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="type">int</span> g[N][N];<span class="comment">//å­˜å‚¨å›¾</span></span><br><span class="line"><span class="type">int</span> dt[N];<span class="comment">//å­˜å‚¨å„ä¸ªèŠ‚ç‚¹åˆ°ç”Ÿæˆæ ‘çš„è·ç¦»</span></span><br><span class="line"><span class="type">int</span> st[N];<span class="comment">//èŠ‚ç‚¹æ˜¯å¦è¢«åŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­</span></span><br><span class="line"><span class="type">int</span> pre[N];<span class="comment">//èŠ‚ç‚¹çš„å‰å»èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">int</span> n, m;<span class="comment">//n ä¸ªèŠ‚ç‚¹ï¼Œm æ¡è¾¹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dt,<span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dt));<span class="comment">//åˆå§‹åŒ–è·ç¦»æ•°ç»„ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼ˆ10äº¿å·¦å³ï¼‰</span></span><br><span class="line">    <span class="type">int</span> res= <span class="number">0</span>;</span><br><span class="line">    dt[<span class="number">1</span>] = <span class="number">0</span>;<span class="comment">//ä» 1 å·èŠ‚ç‚¹å¼€å§‹ç”Ÿæˆ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)<span class="comment">//æ¯æ¬¡å¾ªç¯é€‰å‡ºä¸€ä¸ªç‚¹åŠ å…¥åˆ°ç”Ÿæˆæ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)<span class="comment">//æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡åˆ¤æ–­</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!st[j] &amp;&amp; (t == <span class="number">-1</span> || dt[j] &lt; dt[t]))<span class="comment">//å¦‚æœæ²¡æœ‰åœ¨æ ‘ä¸­ï¼Œä¸”åˆ°æ ‘çš„è·ç¦»æœ€çŸ­ï¼Œåˆ™é€‰æ‹©è¯¥ç‚¹</span></span><br><span class="line">                t = j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2022.6.1 å‘ç°æµ‹è¯•ç”¨ä¾‹åŠ å¼ºåï¼Œéœ€è¦åˆ¤æ–­å­¤ç«‹ç‚¹äº†</span></span><br><span class="line">        <span class="comment">//å¦‚æœå­¤ç«‹ç‚¹ï¼Œç›´è¿”è¾“å‡ºä¸èƒ½ï¼Œç„¶åé€€å‡º</span></span><br><span class="line">        <span class="keyword">if</span>(dt[t] == <span class="number">0x3f3f3f3f</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;impossible&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        st[t] = <span class="number">1</span>;<span class="comment">// é€‰æ‹©è¯¥ç‚¹</span></span><br><span class="line">        res += dt[t];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)<span class="comment">//æ›´æ–°ç”Ÿæˆæ ‘å¤–çš„ç‚¹åˆ°ç”Ÿæˆæ ‘çš„è·ç¦»</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(dt[i] &gt; g[t][i] &amp;&amp; !st[i])<span class="comment">//ä» t åˆ°èŠ‚ç‚¹ i çš„è·ç¦»å°äºåŸæ¥è·ç¦»ï¼Œåˆ™æ›´æ–°ã€‚</span></span><br><span class="line">            &#123;</span><br><span class="line">                dt[i] = g[t][i];<span class="comment">//æ›´æ–°è·ç¦»</span></span><br><span class="line">                pre[i] = t;<span class="comment">//ä» t åˆ° i çš„è·ç¦»æ›´çŸ­ï¼Œi çš„å‰é©±å˜ä¸º t.</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; res;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getPath</span><span class="params">()</span><span class="comment">//è¾“å‡ºå„ä¸ªè¾¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt; <span class="number">1</span>; i--)<span class="comment">//n ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ‰ n-1 æ¡è¾¹ã€‚</span></span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt;<span class="string">&quot; &quot;</span> &lt;&lt; pre[i] &lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt; endl;<span class="comment">// i æ˜¯èŠ‚ç‚¹ç¼–å·ï¼Œpre[i] æ˜¯ i èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ã€‚ä»–ä»¬æ„æˆä¸€æ¡è¾¹ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(g, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(g));<span class="comment">//å„ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»åˆå§‹åŒ–æˆå¾ˆå¤§çš„æ•°</span></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;<span class="comment">//è¾“å…¥èŠ‚ç‚¹æ•°å’Œè¾¹æ•°</span></span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b, w;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; w;<span class="comment">//è¾“å‡ºè¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹å’Œæƒé‡</span></span><br><span class="line">        g[a][b] = g[b][a] = <span class="built_in">min</span>(g[a][b],w);<span class="comment">//å­˜å‚¨æƒé‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">prim</span>();<span class="comment">//æ±‚æœ€ä¸‹ç”Ÿæˆæ ‘</span></span><br><span class="line">    <span class="comment">//getPath();//è¾“å‡ºè·¯å¾„</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><details><summary>æœ€å°è·¯å¾„å’Œ</summary>[leetcode 64 é¢˜](https://leetcode.cn/problems/minimum-path-sum/description/?envType=problem-list-v2&envId=dynamic-programming)<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minPathSum</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">1</span> &amp;&amp; m &lt;= <span class="number">1</span>) <span class="keyword">return</span> grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// f[i][j] è¡¨ç¤ºèµ°åˆ° (i, j) çš„æœ€å°è·¯å¾„</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m, <span class="number">0x3f3f3f3f</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i++) f[<span class="number">0</span>][i] = f[<span class="number">0</span>][i<span class="number">-1</span>] + grid[<span class="number">0</span>][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) f[i][<span class="number">0</span>] = f[i<span class="number">-1</span>][<span class="number">0</span>] + grid[i][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; m; j++)&#123;</span><br><span class="line">                f[i][j] = <span class="built_in">min</span>(f[i<span class="number">-1</span>][j] + grid[i][j], f[i][j]);</span><br><span class="line">                f[i][j] = <span class="built_in">min</span>(f[i][j<span class="number">-1</span>] + grid[i][j], f[i][j]);</span><br><span class="line">                <span class="comment">// cout &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; &quot; &quot; &lt;&lt; f[i][j] &lt;&lt; endl;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n<span class="number">-1</span>][m<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åº”è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰¹å¾èåˆçš„é—®é¢˜</title>
      <link href="/2025/08/%E7%89%B9%E5%BE%81%E8%9E%8D%E5%90%88%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2025/08/%E7%89%B9%E5%BE%81%E8%9E%8D%E5%90%88%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="å¯èƒ½åŸå› "><a href="#å¯èƒ½åŸå› " class="headerlink" title="å¯èƒ½åŸå› "></a>å¯èƒ½åŸå› </h3><ol><li><strong>ç‰¹å¾èåˆæ–¹å¼ä¸å¹³æ»‘</strong><ul><li>å¦‚æœç”¨çš„æ˜¯ç®€å•çš„ <strong>add æˆ– cat â†’ conv</strong>ï¼Œä¸åŒæ¥æºçš„ç‰¹å¾åˆ†å¸ƒå·®åˆ«å¾ˆå¤§ï¼Œå®¹æ˜“åœ¨å±€éƒ¨å‡ºç°çˆ†ç‚¹ã€‚</li><li>ç‰¹åˆ«æ˜¯äººè„¸åŒºåŸŸï¼Œåˆ†å¸ƒå·®å¼‚ä¼šè¢«æ”¾å¤§ï¼Œå¯¼è‡´ decoder è¾“å‡ºå¼‚å¸¸é¢œè‰²ã€‚ (å¦‚å›¾é¼»å­å¤„çš„æ©™è‰² spot)[lq, gt, decoder1, fuse, decoder2]<br><img src="/images/ç‰¹å¾èåˆ.png" alt="ç‰¹å¾èåˆä¸å¹³æ»‘"></li></ul></li><li><strong>ç‰¹å¾æœªå®Œå…¨å¯¹é½</strong><ul><li>ç‰¹å¾ä¸ä¸¥æ ¼å¯¹é½ï¼Œå°±ä¼šåœ¨èåˆæ—¶ç•™ä¸‹è¾¹ç•Œ/ç‚¹çŠ¶ä¼ªå½±ã€‚</li><li>ç®€å•çš„ bilinear æ’å€¼å¯èƒ½ä¸è¶³ä»¥ä¿è¯å¹³æ»‘è¿‡æ¸¡ã€‚</li></ul></li><li><strong>æ•°å€¼èŒƒå›´ä¸åŒ¹é…</strong><ul><li>ä¸åŒçš„ feature å¯èƒ½å¤„äºä¸åŒçš„æ•°å€¼èŒƒå›´ã€‚</li><li>å¦‚æœæ²¡æœ‰åš <strong>å½’ä¸€åŒ– (LayerNorm/InstanceNorm)</strong>ï¼Œç›´æ¥ç›¸åŠ /æ‹¼æ¥å°±ä¼šå‡ºç°è‰²å½©ç‚¹ã€‚</li></ul></li><li><strong>è¿‡åº¦ä¾èµ–å¤–éƒ¨ç‰¹å¾ (shortcut)</strong><ul><li>Decoder å¯èƒ½åœ¨æŸäº› spatial ä½ç½®å‡ ä¹å®Œå…¨ä¾èµ–å¤–éƒ¨ç‰¹å¾ï¼Œå¯¼è‡´é¢œè‰²ç›´æ¥æ¥è‡ªæ•™å¸ˆåˆ†å¸ƒ â†’ å‡ºç°éšæœºåè‰²ç‚¹ã€‚</li></ul></li></ol><hr><h3 id="âœ…-æ”¹è¿›å»ºè®®ï¼ˆå‡å°‘é¢œè‰²ç‚¹ä¼ªå½±ï¼‰"><a href="#âœ…-æ”¹è¿›å»ºè®®ï¼ˆå‡å°‘é¢œè‰²ç‚¹ä¼ªå½±ï¼‰" class="headerlink" title="âœ… æ”¹è¿›å»ºè®®ï¼ˆå‡å°‘é¢œè‰²ç‚¹ä¼ªå½±ï¼‰"></a>âœ… æ”¹è¿›å»ºè®®ï¼ˆå‡å°‘é¢œè‰²ç‚¹ä¼ªå½±ï¼‰</h3><ol><li><strong>èåˆå‰åŠ å½’ä¸€åŒ–</strong><ul><li>åš <code>LayerNorm</code> æˆ– <code>InstanceNorm</code>ã€‚</li><li>ä¿è¯ä¸åŒæ¥æºç‰¹å¾åœ¨æ•°å€¼èŒƒå›´å’Œç»Ÿè®¡é‡ä¸Šä¸€è‡´ã€‚</li></ul></li><li><strong>æ”¹è¿›èåˆæ¨¡å—</strong><ul><li>ç”¨ <strong>CrossAttention</strong> æ›¿ä»£ç®€å•çš„ cat/addï¼š<ul><li>Query = å­¦ç”Ÿ decoder å½“å‰ç‰¹å¾</li><li>Key/Value = å¯¹é½åçš„å¤–éƒ¨ç‰¹å¾</li><li>å¥½å¤„ï¼šdecoder è‡ªå·±â€œé€‰æ‹©â€è¦ä¸è¦ç”¨å¤–éƒ¨ç‰¹å¾ï¼Œè€Œä¸æ˜¯è¢«ç¡¬æ³¨å…¥ã€‚</li></ul></li><li>æˆ–è€…è½»é‡åŒ–å°è¯• <strong>LoRA CrossAttn</strong>ï¼ˆåªè®­ç»ƒå°å‚æ•°ï¼‰ï¼Œé¿å…å¤§æ¨¡å‹è¿‡æ‹Ÿåˆã€‚</li></ul></li><li><strong>ç‰¹å¾ Dropout</strong><ul><li>è®­ç»ƒæ—¶éšæœºä¸¢æ‰ä¸€éƒ¨åˆ†å¤–éƒ¨ç‰¹å¾é€šé“æˆ– spatial patchã€‚</li><li>é˜²æ­¢ decoder è¿‡åº¦ä¾èµ–å¤–éƒ¨ç‰¹å¾ï¼Œå‡å°‘ shortcut ä¼ªå½±ã€‚</li></ul></li><li><strong>æŸå¤±å‡½æ•°ä¸­åŠ  smooth/TV loss</strong><ul><li>åœ¨å›¾åƒå±‚é¢çº¦æŸé¢œè‰²å¹³æ»‘æ€§ï¼ŒæŠ‘åˆ¶å•ç‚¹çˆ†ç‚¸çš„é¢œè‰²ã€‚</li></ul></li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰¹å¾èåˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MoE (Mixture of Experts) æ··åˆä¸“å®¶</title>
      <link href="/2025/08/MoE/"/>
      <url>/2025/08/MoE/</url>
      
        <content type="html"><![CDATA[<h3 id="ğŸ”¹-ä¸€ã€MoE-çš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#ğŸ”¹-ä¸€ã€MoE-çš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ğŸ”¹ ä¸€ã€MoE çš„æ ¸å¿ƒæ¦‚å¿µ"></a>ğŸ”¹ ä¸€ã€MoE çš„æ ¸å¿ƒæ¦‚å¿µ</h3><p><strong>Mixture of Expertsï¼ˆä¸“å®¶æ··åˆæ¨¡å‹ï¼‰</strong> æ˜¯ä¸€ç±»æ¨¡å—åŒ–ç¥ç»ç½‘ç»œç»“æ„ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ol><li><strong>æ¨¡å‹æ‹†è§£</strong>ï¼šæŠŠä¸€ä¸ªå¤§æ¨¡å‹æ‹†è§£ä¸ºå¤šä¸ªä¸“å®¶ï¼ˆexpertï¼‰å­ç½‘ç»œ</li><li><strong>ç¨€ç–æ¿€æ´»</strong>ï¼šæ¯ä¸ªè¾“å…¥æ ·æœ¬åªä¼šæ¿€æ´»å…¶ä¸­ä¸€éƒ¨åˆ†ä¸“å®¶ï¼ˆè€Œä¸æ˜¯æ‰€æœ‰ä¸“å®¶ï¼‰</li><li><strong>æ™ºèƒ½è·¯ç”±</strong>ï¼šç”±ä¸€ä¸ªé—¨æ§ç½‘ç»œï¼ˆgating networkï¼‰å†³å®šè¯¥è¾“å…¥è¦ç”¨å“ªäº›ä¸“å®¶</li><li><strong>ç»“æœèåˆ</strong>ï¼šæœ€ç»ˆçš„è¾“å‡ºç”±è¿™äº›ä¸“å®¶çš„ç»“æœåŠ æƒç»„åˆè€Œæˆ</li></ol><blockquote><p>ğŸ’¡ <strong>ç›´è§‚ç±»æ¯”</strong>ï¼šå°±åƒä¸€ä¸ªå…¬å¸é‡Œæœ‰å¾ˆå¤šä¸“å®¶ï¼Œé‡åˆ°ä¸åŒçš„é—®é¢˜ï¼Œå…ˆç”±ç§˜ä¹¦ï¼ˆgating networkï¼‰åˆ¤æ–­è¯¥æ‰¾è°ï¼Œæœ€åç»¼åˆä¸“å®¶æ„è§å¾—åˆ°ç»“æœã€‚</p></blockquote><hr><h3 id="ğŸ”¹-äºŒã€MoE-çš„åŸºæœ¬ç»“æ„"><a href="#ğŸ”¹-äºŒã€MoE-çš„åŸºæœ¬ç»“æ„" class="headerlink" title="ğŸ”¹ äºŒã€MoE çš„åŸºæœ¬ç»“æ„"></a>ğŸ”¹ äºŒã€MoE çš„åŸºæœ¬ç»“æ„</h3><h4 id="1-ä¸“å®¶ç½‘ç»œ-Experts"><a href="#1-ä¸“å®¶ç½‘ç»œ-Experts" class="headerlink" title="1. ä¸“å®¶ç½‘ç»œ (Experts)"></a>1. ä¸“å®¶ç½‘ç»œ (Experts)</h4><ul><li><strong>ç»“æ„</strong>ï¼šé€šå¸¸æ˜¯ä¸€äº›å°å‹çš„å‰é¦ˆç½‘ç»œï¼ˆFeed-Forward Network, FFNï¼‰</li><li><strong>èŒè´£</strong>ï¼šæ¯ä¸ªä¸“å®¶è´Ÿè´£å¤„ç†ä¸åŒç±»å‹çš„è¾“å…¥ç‰¹å¾</li><li><strong>è§„æ¨¡</strong>ï¼šå¯ä»¥æœ‰å‡ ååˆ°ä¸Šç™¾ä¸ªä¸“å®¶ï¼Œä½†æ¯æ¬¡è¾“å…¥é€šå¸¸åªæ¿€æ´»å…¶ä¸­å°‘æ•°ï¼ˆå¦‚ Top-1 æˆ– Top-2ï¼‰</li></ul><h4 id="2-é—¨æ§ç½‘ç»œ-Gating-Network"><a href="#2-é—¨æ§ç½‘ç»œ-Gating-Network" class="headerlink" title="2. é—¨æ§ç½‘ç»œ (Gating Network)"></a>2. é—¨æ§ç½‘ç»œ (Gating Network)</h4><ul><li><strong>åŠŸèƒ½</strong>ï¼šæ¥æ”¶è¾“å…¥åï¼Œè¾“å‡ºä¸€ä¸ªåˆ†å¸ƒï¼ˆç±»ä¼¼ softmax æƒé‡ï¼‰ï¼Œè¡¨ç¤ºæ¯ä¸ªä¸“å®¶çš„é‡è¦æ€§</li><li><strong>å¸¸è§ç­–ç•¥</strong>ï¼š<ul><li><strong>Soft gating</strong>ï¼šå¯¹æ‰€æœ‰ä¸“å®¶åˆ†é…æƒé‡ï¼ˆè®¡ç®—é‡å¤§ï¼‰</li><li><strong>Sparse gating</strong>ï¼šåªé€‰æ‹©å‰ k ä¸ªä¸“å®¶ï¼ˆTop-kï¼‰ï¼Œå¤§å¤§é™ä½è®¡ç®—é‡ï¼ˆè¿™ä¹Ÿæ˜¯ç°ä»£ MoE çš„å¸¸ç”¨æ–¹æ³•ï¼‰</li></ul></li></ul><h4 id="3-ç»„åˆæœºåˆ¶-Aggregation"><a href="#3-ç»„åˆæœºåˆ¶-Aggregation" class="headerlink" title="3. ç»„åˆæœºåˆ¶ (Aggregation)"></a>3. ç»„åˆæœºåˆ¶ (Aggregation)</h4><ul><li><strong>ç›®æ ‡</strong>ï¼šå°†é€‰ä¸­çš„ä¸“å®¶è¾“å‡ºç»“æœåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡º</li></ul><h3 id="ğŸ”¹-ä¸‰ã€MoE-çš„ä¼˜åŠ¿"><a href="#ğŸ”¹-ä¸‰ã€MoE-çš„ä¼˜åŠ¿" class="headerlink" title="ğŸ”¹ ä¸‰ã€MoE çš„ä¼˜åŠ¿"></a>ğŸ”¹ ä¸‰ã€MoE çš„ä¼˜åŠ¿</h3><p><strong>å‚æ•°è§„æ¨¡å¤§ï¼Œä½†è®¡ç®—å¼€é”€å°</strong></p><ul><li>å¯ä»¥æœ‰ä¸Šç™¾äº¿å‚æ•°ï¼ˆåˆ†å¸ƒåœ¨å„ä¸ªä¸“å®¶é‡Œï¼‰ï¼Œä½†æ¯æ¬¡åªç”¨åˆ°å°‘é‡ä¸“å®¶ï¼Œæ‰€ä»¥è®¡ç®—æˆæœ¬æ¥è¿‘å°æ¨¡å‹ã€‚</li></ul><p><strong>æé«˜æ¨¡å‹è¡¨è¾¾èƒ½åŠ›</strong></p><ul><li>ä¸åŒä¸“å®¶å¯ä»¥å­¦ä¹ ä¸åŒçš„æ•°æ®æ¨¡å¼ï¼Œå¢å¼ºæ¨¡å‹çš„å¤šæ ·æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚</li></ul><p><strong>å¯æ‰©å±•æ€§å¥½</strong></p><ul><li>å¯ä»¥é€šè¿‡å¢åŠ ä¸“å®¶æ•°é‡æ¥æå‡æ¨¡å‹å®¹é‡ï¼Œè€Œä¸æ˜¾è‘—å¢åŠ æ¨ç†æ—¶çš„è®¡ç®—é‡ã€‚</li></ul><h3 id="ğŸ”¹-å››ã€MoE-çš„æŒ‘æˆ˜"><a href="#ğŸ”¹-å››ã€MoE-çš„æŒ‘æˆ˜" class="headerlink" title="ğŸ”¹ å››ã€MoE çš„æŒ‘æˆ˜"></a>ğŸ”¹ å››ã€MoE çš„æŒ‘æˆ˜</h3><ol><li><p><strong>è´Ÿè½½å‡è¡¡ (Load Balancing)</strong>: é—¨æ§ç½‘ç»œå¯èƒ½ä¼šåå¥½æŸå‡ ä¸ªä¸“å®¶ï¼Œå¯¼è‡´éƒ¨åˆ†ä¸“å®¶å¾ˆå°‘è¢«è®­ç»ƒåˆ°ã€‚è§£å†³æ–¹æ³•ï¼šå¼•å…¥ è´Ÿè½½å‡è¡¡æŸå¤±å‡½æ•°ï¼ˆå¦‚ Google çš„ Switch Transformer æå‡ºçš„æ­£åˆ™åŒ–é¡¹ï¼‰ã€‚</p></li><li><p><strong>é€šä¿¡å¼€é”€å¤§ (åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­)</strong>: å› ä¸ºä¸åŒä¸“å®¶å¯èƒ½åœ¨ä¸åŒ GPU ä¸Šï¼Œè¾“å…¥éœ€è¦è·¯ç”±åˆ°å¯¹åº”çš„ GPUï¼Œå®¹æ˜“é€ æˆé€šä¿¡ç“¶é¢ˆã€‚</p></li><li><p><strong>è®­ç»ƒç¨³å®šæ€§</strong>: é—¨æ§ç½‘ç»œè®­ç»ƒä¸å½“æ—¶ï¼Œå¯èƒ½å‡ºç°æ¢¯åº¦æ¶ˆå¤±æˆ–ä¸“å®¶ä¸æ”¶æ•›çš„é—®é¢˜ã€‚</p></li></ol><h3 id="ğŸ”¹-äº”ã€MoE-çš„ä»£è¡¨æ€§å·¥ä½œ"><a href="#ğŸ”¹-äº”ã€MoE-çš„ä»£è¡¨æ€§å·¥ä½œ" class="headerlink" title="ğŸ”¹ äº”ã€MoE çš„ä»£è¡¨æ€§å·¥ä½œ"></a>ğŸ”¹ äº”ã€MoE çš„ä»£è¡¨æ€§å·¥ä½œ</h3><ol><li><p>Shazeer et al. (2017), â€œOutrageously Large Neural Networksâ€<br>æå‡ºæœ€æ—©çš„å¤§è§„æ¨¡ç¨€ç– MoE æ¨¡å‹ã€‚</p></li><li><p>Switch Transformer (Google, 2021)<br>ä½¿ç”¨ Top-1 é—¨æ§ï¼ˆæ¯ä¸ªè¾“å…¥åªé€‰ä¸€ä¸ªä¸“å®¶ï¼‰ï¼Œæå¤§æå‡äº†è®­ç»ƒæ•ˆç‡ã€‚ è¯æ˜äº†ç¨€ç–ä¸“å®¶æœºåˆ¶å¯ä»¥æ‰©å±•åˆ°ä¸‡äº¿å‚æ•°çº§åˆ«ã€‚</p></li><li><p>GLaM (Google, 2021) Generalist Language Modelï¼ŒåŸºäº MoE çš„å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ï¼Œè®¡ç®—é‡æ¯” GPT-3 å°‘ï¼Œä½†æ•ˆæœæ›´å¥½ã€‚</p></li><li><p>DeepSpeed MoE (Microsoft) å·¥ç¨‹ä¼˜åŒ–çš„ MoE æ¡†æ¶ï¼Œå¹¿æ³›ç”¨äºåˆ†å¸ƒå¼è®­ç»ƒã€‚</p></li></ol><h3 id="ğŸ”¹-å…­ã€å­¦ä¹ èµ„æºæ¨è"><a href="#ğŸ”¹-å…­ã€å­¦ä¹ èµ„æºæ¨è" class="headerlink" title="ğŸ”¹ å…­ã€å­¦ä¹ èµ„æºæ¨è"></a>ğŸ”¹ å…­ã€å­¦ä¹ èµ„æºæ¨è</h3><p>ğŸŒ å·¥ç¨‹æ¡†æ¶</p><p><a href="https://github.com/deepspeedai/DeepSpeed?utm_source=chatgpt.com">DeepSpeed MoE (Microsoft)</a></p><p><a href="https://github.com/facebookresearch/fairseq?utm_source=chatgpt.com">Fairseq MoE (Meta AI)</a></p><p><a href="https://github.com/tensorflow/mesh?utm_source=chatgpt.com">TensorFlow MoE</a></p><h3 id="âœ…-æ€»ç»“ä¸€ä¸‹ï¼š"><a href="#âœ…-æ€»ç»“ä¸€ä¸‹ï¼š" class="headerlink" title="âœ… æ€»ç»“ä¸€ä¸‹ï¼š"></a>âœ… æ€»ç»“ä¸€ä¸‹ï¼š</h3><p>MoE æ˜¯ä¸€ç§ ç¨€ç–æ¿€æ´»çš„å¤§æ¨¡å‹æ¶æ„ï¼Œé€šè¿‡ä¸“å®¶åˆ†å·¥+é—¨æ§é€‰æ‹©ï¼Œå¤§å¹…æå‡æ¨¡å‹å®¹é‡å’Œæ³›åŒ–èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒè®¡ç®—å¼€é”€å¯æ§ã€‚å®ƒåœ¨ å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œæ‰©å±•åˆ°ä¸‡äº¿å‚æ•°çº§åˆ«çš„è®­ç»ƒä¸­åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MoE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠCholeã€‹ï¼ˆå…‹æ´›ä¼Šï¼‰</title>
      <link href="/2025/08/Chloe_%E5%85%8B%E6%B4%9B%E4%BC%8A/"/>
      <url>/2025/08/Chloe_%E5%85%8B%E6%B4%9B%E4%BC%8A/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><div class="movie-info-container"><div class="movie-details">  <ul>      <li><strong>å¯¼æ¼”</strong>ï¼šé˜¿æ‰˜å§†Â·ä¼Šæˆˆæ‰¬</li>      <li><strong>ä¸»æ¼”</strong>ï¼šæœ±ä¸½å®‰Â·æ‘©å°” / é˜¿æ›¼è¾¾Â·å¡å¼—é‡Œå¾·</li>      <li><strong>ä¸Šæ˜ æ—¶é—´</strong>ï¼š2009 å¹´</li>      <li><strong>è§‚çœ‹æ—¶é—´</strong>ï¼š2025 å¹´ 8 æœˆ </li>      <li><strong>è¯„åˆ†</strong> â­â­â­â­â˜† (4/5)</li>  </ul></div><div class="movie-poster"><img src="/images/å…‹æ´›ä¼Š.png" alt="å…‹æ´›ä¼Šæµ·æŠ¥" width="250" height="370"></div></div><p>æ˜¯ä¸€ä¸ªå‰§æƒ…ä¸Šå¾ˆ dramaï¼Œä½†æ˜¯æƒ…ç»ªæ„Ÿå—ä¸Šä¸ drama çš„ç‰‡å­ï¼Œå› ä¸ºä¸¤ä¸ªå¥³æ¼”å‘˜éƒ½æ¼”çš„å¾ˆè‡ªç„¶ï¼Œå‰§æƒ…ä¸Šè·Œå®•èµ·ä¼ï¼Œä½†æ˜¯æƒ…ç»ªä¸Šé¡ºåˆ©æˆç« ã€‚æœ‰å¾ˆå¤šé•œå¤´ä¸Šçš„è¯­è¨€è¡¨è¾¾ï¼Œæš—ç¤ºä¸¤äººçš„æƒ…æ„«å’Œæš§æ˜§ï¼Œå¾ˆå…‹åˆ¶ä¹Ÿå¾ˆå†·æ·¡ï¼Œåœ¨æœ€åä¹Ÿæœ‰ä¸€ä¸ªå°é«˜æ½®ï¼Œæ‰€ä»¥çœ‹å®Œå¿ƒæƒ…èˆ’ç•…ï¼Œä¸æ˜¯ä»å¤´å…‹åˆ¶åˆ°å°¾è¿è§‚ä¼—ä¸€èµ·éš¾å—çš„å½±ç‰‡ã€‚</p><p>æˆ‘è§‰å¾—åº”è¯¥æ˜¯æ‹å°‘å¥³çš„æƒ…çˆ±å’Œå¥³æ€§çš„ä¸­å¹´å±æœºè§’åº¦æ¯”è¾ƒæ–°é¢–å’Œä¸é”™çš„ç‰‡å­ã€‚</p><p>ps: æœ±ä¸½å®‰Â·æ‘©å°”ä¸æ„§æ˜¯å¤§æ»¡è´¯ï¼Œæ¼”çš„ç›¸å½“ä¹‹å¥½ï¼Œçœ‹å®Œæ¿€æƒ…æ¾æ¹ƒçš„åˆå»çœ‹äº†å¥¹çš„å…¶ä»–ä½œå“ã€‚æ¨èï¼</p><style>.movie-info-container {  display: flex;  gap: 2rem;  align-items: flex-start;  margin: 1.5rem 0;}.movie-details {  flex: 2;}.movie-poster {  flex: 1;  text-align: center;}.movie-poster img {  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  object-fit: cover; /* ä¿æŒæ¯”ä¾‹ï¼Œè£å‰ªæº¢å‡ºéƒ¨åˆ† */}@media (max-width: 768px) {  .movie-info-container {    flex-direction: column;    gap: 1rem;  }  .movie-poster img {    width: 200px !important;    height: 300px !important;  }}</style><hr><p><em>æœ¬æ–‡ä¸ºä¸ªäººè§‚å½±æ„Ÿå—ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> å½±éŸ³ä¹¦è¯„ </category>
          
          <category> ç”µå½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå½± </tag>
            
            <tag> æ‚¬ç–‘ </tag>
            
            <tag> åŒæ€§ </tag>
            
            <tag> å®¶åº­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to train a LQ Encoder</title>
      <link href="/2025/08/How-to-train-a-LQ-Encoder-%E5%A6%82%E4%BD%95%E8%AE%AD%E7%BB%83%E4%B8%80%E4%B8%AALQ-Encoder/"/>
      <url>/2025/08/How-to-train-a-LQ-Encoder-%E5%A6%82%E4%BD%95%E8%AE%AD%E7%BB%83%E4%B8%80%E4%B8%AALQ-Encoder/</url>
      
        <content type="html"><![CDATA[<ul><li><p>æƒ…å†µä¸€ï¼šLQ = Low-Quality (ä½è´¨é‡)</p><ul><li><p>ç›®æ ‡ï¼šè®­ç»ƒä¸€ä¸ªç¼–ç å™¨ï¼ˆEncoderï¼‰ï¼Œä½¿å…¶èƒ½å¤Ÿä»ä½è´¨é‡ã€æœ‰æŸã€æ¨¡ç³Šæˆ–å¸¦å™ªç‚¹çš„è¾“å…¥ï¼ˆå¦‚ä½åˆ†è¾¨ç‡å›¾ç‰‡ã€å‹ç¼©è¿‡çš„éŸ³é¢‘ï¼‰ä¸­æå–å‡ºç¨³å®šã€é²æ£’çš„æ ¸å¿ƒç‰¹å¾ã€‚</p></li><li><p>åº”ç”¨åœºæ™¯ï¼šå›¾åƒè¶…åˆ†è¾¨ç‡ (Super-Resolution)ã€å›¾åƒä¿®å¤ (Image Restoration)ã€äººè„¸å¢å¼º (Face Enhancement)ã€å»å™ª (Denoising) ç­‰ã€‚</p></li></ul></li><li><p>æ¡ˆä¾‹ 1ï¼š ã€ŠSUPIRã€‹<br><img src="/images/supir.png" alt="SUPIR"><br>åœ¨ SUPIR ä¸­ï¼Œä¸ºäº†ç¡®ä¿ä½è´¨é‡å›¾åƒèƒ½å¤Ÿè¢«æ­£ç¡®æ˜ å°„åˆ°ä¸é¢„è®­ç»ƒ SDXL ç›¸åŒçš„æ½œåœ¨ç©ºé—´ï¼Œä½œè€…æå‡ºäº†è®­ç»ƒä¸€ä¸ªæŠ—é€€åŒ–ç¼–ç å™¨ï¼ˆDegradation-Robust Encoderï¼‰ã€‚</p><p>SDXL çš„æ‰©æ•£ç”Ÿæˆè¿‡ç¨‹åœ¨æ½œåœ¨ç©ºé—´ä¸­è¿›è¡Œã€‚å›¾åƒé¦–å…ˆé€šè¿‡é¢„è®­ç»ƒçš„ç¼–ç å™¨æ˜ å°„åˆ°æ½œåœ¨ç©ºé—´ã€‚ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨é¢„è®­ç»ƒçš„ SDXLï¼Œä½è´¨é‡å›¾åƒ <script type="math/tex">x_{LQ}</script> ä¹Ÿåº”è¯¥è¢«æ˜ å°„åˆ°ç›¸åŒçš„æ½œåœ¨ç©ºé—´ã€‚ç”±äºåŸå§‹ç¼–ç å™¨æ²¡æœ‰åœ¨ä½è´¨é‡å›¾åƒä¸Šè®­ç»ƒï¼Œç›´æ¥ä½¿ç”¨å®ƒè¿›è¡Œç¼–ç ä¼šå½±å“æ¨¡å‹å¯¹ä½è´¨é‡å›¾åƒå†…å®¹çš„åˆ¤æ–­ï¼Œè¿›è€Œäº§ç”Ÿè¯¯å¯¼æ€§çš„äººå·¥åˆ¶å“ä½œä¸ºå›¾åƒå†…å®¹ã€‚è®­ç»ƒä¸€ä¸ªæŠ—é€€åŒ–ç¼–ç å™¨ <script type="math/tex">\mathcal{E}_{dr}</script>ï¼Œé€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°ä½¿å…¶å¯¹é€€åŒ–å…·æœ‰é²æ£’æ€§ï¼š</p><script type="math/tex; mode=display">\mathcal{L}_c = ||\mathcal{D}(\mathcal{E}_{dr}(x_{LQ})) - \mathcal{D}(\mathcal{E}_{dr}(x_{GT}))||_2^2</script><p>å…¶ä¸­ï¼š</p><ul><li>$\mathcal{E}_{dr}$ æ˜¯å¾…å¾®è°ƒçš„æŠ—é€€åŒ–ç¼–ç å™¨</li><li>$\mathcal{D}$ æ˜¯å›ºå®šçš„è§£ç å™¨</li><li>$x_{GT}$ æ˜¯çœŸå®å›¾åƒï¼ˆground truthï¼‰</li></ul><p>è¿™æ ·è®­ç»ƒå‡ºçš„ç¼–ç å™¨èƒ½å¤Ÿå°†ä½è´¨é‡å›¾åƒç¼–ç åˆ°ä¸é«˜è´¨é‡å›¾åƒç›¸åŒçš„æ½œåœ¨ç©ºé—´ä¸­ï¼Œç¡®ä¿åç»­æ‰©æ•£è¿‡ç¨‹çš„æœ‰æ•ˆæ€§ã€‚</p></li><li><p>æ¡ˆä¾‹ 2ï¼š ã€ŠPASDã€‹<br><img src="/images/PASD.png" alt="PASD"></p><p>çœŸå®ä¸–ç•Œçš„ä½è´¨é‡å›¾åƒé€šå¸¸å—åˆ°å¤æ‚ä¸”æœªçŸ¥çš„é™è§£å½±å“ã€‚å› æ­¤ï¼Œä½œè€…é‡‡ç”¨ä¸€ä¸ªé™è§£å»é™¤æ¨¡å—æ¥å‡å°‘é™è§£çš„å½±å“ï¼Œå¹¶ä»ä½è´¨é‡å›¾åƒä¸­æå–â€œå¹²å‡€â€çš„ç‰¹å¾ä»¥æ§åˆ¶æ‰©æ•£è¿‡ç¨‹ã€‚å¦‚å›¾ 2 æ‰€ç¤ºï¼Œä½œè€…é‡‡ç”¨é‡‘å­—å¡”ç½‘ç»œæ¥æå–è¾“å…¥ä½è´¨é‡å›¾åƒçš„ 1/2ã€1/4 å’Œ 1/8 ç¼©æ”¾åˆ†è¾¨ç‡çš„å¤šå°ºåº¦ç‰¹å¾å›¾ã€‚ç›´è§‚åœ°ï¼Œè¿™äº›ç‰¹å¾å¯ä»¥ç”¨äºå°½å¯èƒ½æ¥è¿‘åœ°é€¼è¿‘ç›¸åº”å°ºåº¦çš„é«˜è´¨é‡å›¾åƒï¼Œä»¥ä¾¿åç»­çš„æ‰©æ•£æ¨¡å—å¯ä»¥ä¸“æ³¨äºæ¢å¤çœŸå®çš„å›¾åƒç»†èŠ‚ï¼Œå‡è½»åŒºåˆ†å›¾åƒé™è§£çš„è´Ÿæ‹…ã€‚å› æ­¤ï¼Œä½œè€…é€šè¿‡é‡‡ç”¨å·ç§¯å±‚â€œtoRGBâ€å°†æ¯ä¸ªå•å°ºåº¦ç‰¹å¾å›¾è½¬æ¢ä¸ºé«˜è´¨é‡ RGB å›¾åƒç©ºé—´ï¼Œå¼•å…¥ä¸­é—´ç›‘ç£ã€‚ä½œè€…åœ¨æ¯ä¸ªåˆ†è¾¨ç‡å°ºåº¦ä¸Šåº”ç”¨ L1 æŸå¤±ï¼Œä»¥å¼ºåˆ¶è¯¥å°ºåº¦çš„é‡å»ºæ¥è¿‘äºé«˜è´¨é‡å›¾åƒçš„ç›¸åº”å°ºåº¦ï¼š</p><script type="math/tex; mode=display">L_{DR} = \sum_{s} ||I_{s}^{HQ} - I_{s}^{ISR}||_1</script><p>å…¶ä¸­ï¼š</p><ul><li>$I_{s}^{HQ}$ æ˜¯å°ºåº¦ s ä¸Šçš„é«˜è´¨é‡çœŸå®å€¼</li><li>$I_{s}^{ISR}$ æ˜¯å°ºåº¦ s ä¸Šçš„ ISR è¾“å‡º</li></ul></li><li><p>æ¡ˆä¾‹ 3ï¼š ã€ŠSeeSRã€‹<br><img src="/images/Seesr.png" alt="Seesr"></p><p>DAPE æ˜¯ä»é¢„è®­ç»ƒçš„æ ‡ç­¾æ¨¡å‹ï¼ˆå¦‚ RAMï¼‰å¾®è°ƒè€Œæ¥çš„ã€‚å¦‚å›¾ 2(a) æ‰€ç¤ºï¼Œé«˜åˆ†è¾¨ç‡å›¾åƒ $x$ é€šè¿‡ä¸€ä¸ªå†»ç»“çš„æ ‡ç­¾æ¨¡å‹è¾“å‡ºè¡¨ç¤ºåµŒå…¥ $f^{HR}$ å’Œ logits åµŒå…¥ $g^{HR}$ï¼Œä½œä¸ºç›‘ç£ DAPE è®­ç»ƒçš„é”šç‚¹ã€‚ä½åˆ†è¾¨ç‡å›¾åƒ $y$ æ˜¯é€šè¿‡å¯¹ $x$ åº”ç”¨éšæœºé™çº§è·å¾—çš„ï¼Œå®ƒä»¬è¢«è¾“å…¥åˆ°å¯è®­ç»ƒçš„å›¾åƒç¼–ç å™¨å’Œæ ‡ç­¾å¤´ä¸­ã€‚ä¸ºäº†ä½¿ DAPE å¯¹å›¾åƒé™çº§å…·æœ‰é²æ£’æ€§ï¼Œä½œè€…å¼ºåˆ¶ä½åˆ†è¾¨ç‡åˆ†æ”¯çš„è¡¨ç¤ºåµŒå…¥å’Œ logits åµŒå…¥æ¥è¿‘é«˜åˆ†è¾¨ç‡åˆ†æ”¯çš„åµŒå…¥ã€‚è®­ç»ƒç›®æ ‡å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\mathcal{L}_{DAPE} = \mathcal{L}_{f}^{HR} + \lambda \mathcal{L}_{g}^{HR}</script><p>å…¶ä¸­ $\lambda$ æ˜¯å¹³è¡¡å‚æ•°ï¼Œ$f^{HR}$ å’Œ $g^{HR}$ æ˜¯ä½åˆ†è¾¨ç‡åˆ†æ”¯çš„è¡¨ç¤ºåµŒå…¥å’Œ logits åµŒå…¥ã€‚<script type="math/tex">\mathcal{L}_{f}</script> æ˜¯å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰æŸå¤±ï¼Œè€Œ <script type="math/tex">\mathcal{L}_{g}</script> æ˜¯äº¤å‰ç†µæŸå¤±ã€‚é€šè¿‡å¯¹é½ä½åˆ†è¾¨ç‡å’Œé«˜åˆ†è¾¨ç‡åˆ†æ”¯çš„è¾“å‡ºï¼ŒDAPE å­¦ä¼šä»æŸåçš„å›¾åƒè¾“å…¥ä¸­é¢„æµ‹é«˜è´¨é‡çš„è¯­ä¹‰æç¤ºã€‚</p></li><li><p>æ¡ˆä¾‹ 4ï¼š ã€ŠHeroSRã€‹<br><img src="/images/HeroSR.png" alt="HeroSR"><br>å‰ä¸‰ç§éƒ½æ˜¯æœ‰ç›‘ç£ï¼ŒHeroSR æ˜¯æ— ç›‘ç£çš„æ–¹å¼ï¼Œé‡‡ç”¨ç«¯åˆ°ç«¯çš„ä¼˜åŒ–ï¼Œè®© VAE encoder å’Œ Unet æ³¨å…¥çš„ LoRA å±‚å»è°ƒåˆ¶ã€‚</p></li><li><p>æƒ…å†µäºŒï¼šLQ = Learned Quantization (å­¦ä¹ å‹é‡åŒ–)</p><ul><li><p>ç›®æ ‡ï¼šè®­ç»ƒä¸€ä¸ªç¼–ç å™¨ï¼Œå…¶è¾“å‡ºçš„è¿ç»­ç‰¹å¾å‘é‡ä¼šè¢«ä¸€ä¸ªé‡åŒ–å±‚ï¼ˆQuantization Layerï¼‰æ˜ å°„åˆ°ä¸€ç»„ç¦»æ•£çš„ã€æœ‰é™çš„â€œç æœ¬â€ (Codebook) å‘é‡ä¸Šã€‚</p></li><li><p>åº”ç”¨åœºæ™¯ï¼šé«˜æ•ˆçš„æ•°æ®å‹ç¼©ã€é«˜è´¨é‡çš„ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ VQ-VAE, VQ-GANï¼‰ã€å­¦ä¹ ç¦»æ•£åŒ–çš„æ•°æ®è¡¨å¾ã€‚</p></li></ul></li><li><p>æ¡ˆä¾‹ 1ï¼š ã€ŠCodeFormerã€‹<br><img src="/images/CodeFormer.png" alt="CodeFormer"><br>å€ŸåŠ©è®­ç»ƒå¥½çš„åŒ…å« HQ å›¾åƒä¿¡æ¯çš„ç æœ¬ï¼Œç«¯åˆ°ç«¯çš„ä¼˜åŒ– LQ Encoderã€‚</p></li><li><p>æ¡ˆä¾‹ 2ï¼š ã€ŠDAEFRã€‹<br><img src="/images/DAEFR_method.png" alt="DAEFR"></p><ol><li><p><strong>ç¬¬ä¸€é˜¶æ®µ</strong> ä½¿ç”¨ VQ-VAE é¢„è®­ç»ƒè®­ç»ƒ:</p><ul><li>LQ Encoder â†’ LQ Codebook â†’ LQ Decoder</li><li>ç›®æ ‡ï¼šé‡å»º LQ å›¾åƒ $x_{LQ}$ï¼Œå¾—åˆ°è‰¯å¥½çš„æ½œåœ¨ç‰¹å¾è¡¨ç¤ºã€‚</li></ul></li><li><p><strong>ç¬¬äºŒé˜¶æ®µ</strong> ä¸“æ³¨ä¸ HQ è¡¨ç¤ºçš„å…³è”:</p><ul><li>è®© LQ Encoder å­¦ä¹ åˆ°èƒ½é¢„æµ‹åˆ° HQ Encoder çš„ç‰¹å¾è¾¹é™…ã€‚</li></ul></li><li><p><strong>ç¬¬ä¸‰é˜¶æ®µ</strong>:</p><ul><li>LQ Encoder æä¾›è¾“å…¥ç‰¹å¾ï¼Œç»è¿‡æ³¨æ„åŠ›åŠ  Transformerï¼Œé¢„æµ‹ HQ çš„ code indexï¼Œæœ€ç»ˆç”¨ HQ Decoder é‡å»º HQ å›¾åƒã€‚</li></ul></li></ol></li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://arxiv.org/pdf/2401.13627">SUPIR</a></li><li><a href="https://arxiv.org/abs/2308.14469">PASD</a></li><li><a href="https://arxiv.org/pdf/2311.16518">SeeSR</a></li><li><a href="https://arxiv.org/pdf/2412.07152">HeroSR</a></li><li><a href="https://arxiv.org/abs/2206.11253">CodeFormer</a></li><li><a href="https://github.com/LIAGM/DAEFR">DAEFR</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LQ Encoder </tag>
            
            <tag> Computer Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Feature-wise Linear Modulation (FiLM)</title>
      <link href="/2025/08/FiLM-Feature-wise-Linear-Modulation/"/>
      <url>/2025/08/FiLM-Feature-wise-Linear-Modulation/</url>
      
        <content type="html"><![CDATA[<h1 id="FiLM-ç‰¹å¾å±‚é¢çº¿æ€§è°ƒåˆ¶-Feature-wise-Linear-Modulation"><a href="#FiLM-ç‰¹å¾å±‚é¢çº¿æ€§è°ƒåˆ¶-Feature-wise-Linear-Modulation" class="headerlink" title="FiLM: ç‰¹å¾å±‚é¢çº¿æ€§è°ƒåˆ¶ (Feature-wise Linear Modulation)"></a>FiLM: ç‰¹å¾å±‚é¢çº¿æ€§è°ƒåˆ¶ (Feature-wise Linear Modulation)</h1><p>åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ¨¡å‹æ ¹æ®æŸäº›å¤–éƒ¨æ¡ä»¶æ¥è°ƒæ•´è‡ªèº«çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾åƒç”Ÿæˆä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ ¹æ®ä¸€æ®µæ–‡å­—æè¿°ï¼ˆâ€œä¸€åªæ­£åœ¨è‰åœ°ä¸Šå¥”è·‘çš„é‡‘è‰²å°ç‹—â€ï¼‰æ¥ç”Ÿæˆç›¸åº”çš„å›¾ç‰‡ï¼›åœ¨è§†è§‰é—®ç­”ï¼ˆVQAï¼‰ä¸­ï¼Œæ¨¡å‹éœ€è¦æ ¹æ®æå‡ºçš„é—®é¢˜æ¥åˆ†æå›¾åƒå¹¶ç»™å‡ºç­”æ¡ˆã€‚</p><p>å¦‚ä½•å°†è¿™äº›â€œæ¡ä»¶ä¿¡æ¯â€é«˜æ•ˆåœ°æ³¨å…¥åˆ°ç¥ç»ç½‘ç»œä¸­ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚ä¸€ç§æœ´ç´ çš„æ–¹æ³•æ˜¯åœ¨è¾“å…¥å±‚å°†æ¡ä»¶å‘é‡ä¸ä¸»è¾“å…¥æ•°æ®æ‹¼æ¥ï¼ˆConcatenateï¼‰åœ¨ä¸€èµ·ï¼Œä½†è¿™å¸¸å¸¸å¯¼è‡´æ¡ä»¶ä¿¡æ¯åœ¨ç½‘ç»œæ·±å±‚ä¼ é€’æ—¶è¢«ç¨€é‡Šæˆ–é—å¿˜ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒFiLM (Feature-wise Linear Modulation) åº”è¿è€Œç”Ÿã€‚å®ƒæ˜¯ä¸€ç§æ€æƒ³å·§å¦™ä¸”é«˜æ•ˆçš„æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒåœ¨äºï¼šä¸ç›´æ¥å°†æ¡ä»¶ä½œä¸ºæ•°æ®è¾“å…¥ï¼Œè€Œæ˜¯ç”¨å®ƒæ¥â€œè°ƒåˆ¶â€æˆ–â€œæ“çºµâ€ç½‘ç»œä¸­é—´å±‚çš„ç‰¹å¾ï¼Œè¿™ç§è°ƒæ•´é€šè¿‡ä¸€ä¸ªéå¸¸ç®€å•çš„ä»¿å°„å˜æ¢ï¼ˆaffine transformationï¼‰æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯å¯¹ç‰¹å¾è¿›è¡Œç¼©æ”¾ (scale) å’Œåç§» (shift)ã€‚</p><h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><p>FiLM å±‚çš„åŸºæœ¬æ•°å­¦å…¬å¼æ˜¯ï¼š</p><script type="math/tex; mode=display">FiLM(x) = \gamma \cdot x + \beta</script><p>å…¶ä¸­ï¼Œ$x$ æ˜¯è¾“å…¥ç‰¹å¾ï¼Œ$\gamma$ å’Œ $\beta$ æ˜¯å¯å­¦ä¹ çš„å‚æ•°, ç”±å¤–éƒ¨çš„æ¡ä»¶ä¿¡æ¯ï¼ˆæ¯”å¦‚ æ–‡æœ¬åµŒå…¥ã€ç±»åˆ«æ ‡ç­¾ã€æ—¶é—´æ­¥ç­‰ï¼‰é€šè¿‡ä¸€ä¸ªå°ç½‘ç»œé¢„æµ‹å¾—åˆ°ã€‚FiLM çš„æ“ä½œä¸åŒ…å«å½’ä¸€åŒ–æ­¥éª¤ã€‚å®ƒç›´æ¥åœ¨åŸå§‹ç‰¹å¾ä¸Šè¿›è¡Œç¼©æ”¾å’Œåç§»ï¼Œç›®çš„æ˜¯è®©æ¡ä»¶ä¿¡æ¯æ¥â€œæ“çºµâ€æˆ–â€œè°ƒæ•´â€è¿™äº›ç‰¹å¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FiLMLayer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channels, condition_dim</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="comment"># æ¡ä»¶ç½‘ç»œï¼Œå°†æ¡ä»¶å‘é‡æ˜ å°„åˆ° gamma å’Œ beta</span></span><br><span class="line">        self.cond_net = nn.Linear(condition_dim, channels * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, condition</span>):</span><br><span class="line">        <span class="comment"># x çš„å½¢çŠ¶: [B, C, H, W] (ä»¥CNNä¸ºä¾‹)</span></span><br><span class="line">        <span class="comment"># condition çš„å½¢çŠ¶: [B, D]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. é€šè¿‡æ¡ä»¶ç½‘ç»œç”Ÿæˆ gamma å’Œ beta</span></span><br><span class="line">        gamma_beta = self.cond_net(condition) <span class="comment"># [B, C*2]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. å°†è¾“å‡ºåˆ‡åˆ†ä¸º gamma å’Œ beta</span></span><br><span class="line">        gamma, beta = torch.chunk(gamma_beta, <span class="number">2</span>, dim=<span class="number">1</span>) <span class="comment"># å‡ä¸º [B, C]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. è°ƒæ•´å½¢çŠ¶ä»¥åŒ¹é…ç‰¹å¾ x</span></span><br><span class="line">        <span class="comment"># unsqueeze ç”¨äºå¢åŠ ç»´åº¦ä»¥è¿›è¡Œå¹¿æ’­ (broadcast)</span></span><br><span class="line">        gamma = gamma.unsqueeze(<span class="number">2</span>).unsqueeze(<span class="number">3</span>) <span class="comment"># [B, C, 1, 1]</span></span><br><span class="line">        beta = beta.unsqueeze(<span class="number">2</span>).unsqueeze(<span class="number">3</span>)   <span class="comment"># [B, C, 1, 1]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 4. åº”ç”¨ FiLM è°ƒåˆ¶</span></span><br><span class="line">        <span class="keyword">return</span> x * gamma + beta</span><br></pre></td></tr></table></figure><h2 id="FiLM-vs-AdaLN"><a href="#FiLM-vs-AdaLN" class="headerlink" title="FiLM vs AdaLN"></a>FiLM vs AdaLN</h2><p>FiLM ç»å¸¸ä¸ AdaLN (Adaptive Layer Normalization) ç›¸æå¹¶è®ºã€‚å®ƒä»¬çš„æ ¸å¿ƒæ€æƒ³ç›¸ä¼¼ï¼ˆéƒ½æ˜¯åŠ¨æ€ç”Ÿæˆä»¿å°„å˜æ¢å‚æ•°ï¼‰ï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼š</p><ul><li><p>FiLM: ç›´æ¥å¯¹ç‰¹å¾è¿›è¡Œä»¿å°„å˜æ¢ Î³x + Î²ã€‚</p></li><li><p>AdaLN: å…ˆå¯¹ç‰¹å¾è¿›è¡Œå½’ä¸€åŒ–ï¼Œç„¶åå†è¿›è¡Œä»¿å°„å˜æ¢ Î³ * Norm(x) + Î²ã€‚</p></li></ul><p>å¯ä»¥è®¤ä¸ºï¼ŒAdaLN æ˜¯ FiLM æ€æƒ³åœ¨å±‚å½’ä¸€åŒ–ï¼ˆLayer Normalizationï¼‰ä¸Šçš„ä¸€ç§ç‰¹ä¾‹åŒ–åº”ç”¨ã€‚AdaLN åœ¨ç¨³å®šè®­ç»ƒçš„åŒæ—¶æ³¨å…¥æ¡ä»¶ï¼Œåœ¨è®¸å¤šç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ DiTï¼‰ä¸­éå¸¸æµè¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FiLM </tag>
            
            <tag> style transfer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-useCallback</title>
      <link href="/2025/08/React-UseCallback/"/>
      <url>/2025/08/React-UseCallback/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h2><p>useCallback æ˜¯ä¸€ä¸ª React Hookï¼Œå®ƒç”¨äºç¼“å­˜ï¼ˆæˆ–ç§°â€˜è®°å¿†åŒ–â€™ï¼‰ä¸€ä¸ªå‡½æ•°ã€‚è¿™èƒ½ç¡®ä¿åœ¨å¤šæ¬¡é‡æ–°æ¸²æŸ“ä¹‹é—´ï¼Œåªè¦ä¾èµ–é¡¹æ²¡æœ‰æ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œä»è€Œä¿æŒå…¶å¼•ç”¨çš„ç¨³å®šæ€§ã€‚</p><hr><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œé€»è¾‘</span></span><br><span class="line">&#125;, [dependencies]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è®°å¿†çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šä¾èµ–æ•°ç»„ï¼ˆdependenciesï¼‰</span></span><br><span class="line"><span class="comment">//  ä¾èµ–ä¸å˜æ—¶ï¼Œè¿”å›**åŒ**ä¸€ä¸ªå‡½æ•°å¼•ç”¨</span></span><br><span class="line"><span class="comment">//  ä¾èµ–å˜åŒ–æ—¶ï¼Œæ‰ä¼šè¿”å›ä¸€ä¸ª**æ–°çš„**å‡½æ•°å¼•ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-useCallback"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-useCallback" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ useCallback"></a>ä¸ºä»€ä¹ˆéœ€è¦ useCallback</h3><p>åœ¨ React ä¸­ï¼Œå‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šé‡æ–°åˆ›å»ºå‡½æ•°å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>handleClick</code> æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ˜¯ä¸€ä¸ª æ–°çš„å‡½æ•°å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°ä½œä¸º <code>props</code> ä¼ ç»™å­ç»„ä»¶ï¼Œé‚£ä¹ˆå³ä½¿é€»è¾‘ä¸å˜ï¼Œå­ç»„ä»¶ä¹Ÿä¼šè®¤ä¸º <code>props</code> å˜äº†ï¼Œä»è€Œ å¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line">  &#125;, []); <span class="comment">// æ²¡æœ‰ä¾èµ–ï¼Œå§‹ç»ˆè¿”å›åŒä¸€ä¸ªå‡½æ•°å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ · <code>handleClick</code> çš„å¼•ç”¨åœ¨ç»„ä»¶å¤šæ¬¡æ¸²æŸ“æ—¶ä¿æŒä¸å˜ã€‚</p><hr><h3 id="ä¸¾ä¾‹å¯¹æ¯”"><a href="#ä¸¾ä¾‹å¯¹æ¯”" class="headerlink" title="ä¸¾ä¾‹å¯¹æ¯”"></a>ä¸¾ä¾‹å¯¹æ¯”</h3><p>âŒ ä¸ç”¨ useCallback</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Parent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">&#123; onClick &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Child render&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å³ä½¿ count å˜åŒ–ï¼Œincrement æ¯æ¬¡éƒ½æ˜¯æ–°å‡½æ•° â†’ Child æ¯æ¬¡éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p>âœ… ç”¨ useCallback</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Parent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> increment = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line">  &#125;, []); <span class="comment">// increment çš„å¼•ç”¨å›ºå®š</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ · Child ä¸ä¼šå› ä¸ºå‡½æ•°å¼•ç”¨å˜åŒ–è€Œé‡å¤æ¸²æŸ“ï¼Œåªåœ¨å¿…è¦æ—¶æ›´æ–°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠOcean&#39;s Eightã€‹</title>
      <link href="/2025/08/Ocean8/"/>
      <url>/2025/08/Ocean8/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><div class="movie-info-container"><div class="movie-details">  <ul>      <li><strong>å¯¼æ¼”</strong>ï¼šGary Ross</li>      <li><strong>ä¸»æ¼”</strong>ï¼šSandra Bullockã€Cate Blanchettã€Anne Hathawayã€Rihannaã€Mindy Kalingã€Sarah Paulsonã€Awkwafina</li>      <li><strong>ä¸Šæ˜ æ—¶é—´</strong>ï¼š2018 å¹´</li>      <li><strong>è§‚çœ‹æ—¶é—´</strong>ï¼š2025 å¹´ 6 æœˆ </li>      <li><strong>è¯„åˆ†</strong> â­â­â­â­â­ (5/5)</li>  </ul></div><div class="movie-poster"><img src="/images/ocean8.png" alt="Ocean's Eight" width="250" height="370"></div></div><p>ä¸ªäººéå¸¸åçˆ±çš„ç”µå½±ï¼Œè™½ç„¶å‰§æƒ…ä¸Šæ€»æ˜¯è¢«å¤§å®¶åæ§½ï¼Œä½†æ˜¯è¯·å¿½ç•¥å‰§æƒ…ï¼ˆbushiï¼‰ï¼Œå°±è®¤è®¤çœŸçœŸçš„çœ‹è¿™äº›ä¸ªå¥³çš„è¿˜æ˜¯ç›¸å½“å¿«ä¹çš„ã€‚åœ¨ç”µå½±ä¸­æ¯ä¸ªäººçš„è§’è‰²å¡‘é€ éƒ½è¿˜æ˜¯æŒºä¸é”™äº†ï¼Œé™¤äº†å®‰å¦®æµ·ç‘Ÿè–‡çš„è§’è‰²å¡‘é€ æœ‰ç‚¹åˆ«æ‰­~ å¼ºçƒˆå¼ºçƒˆå®‰åˆ©å–œæ¬¢ æ¡‘å©†ï¼Œå¤§é­”ç‹å’Œé¦™è•‰å§ç»„åˆçš„äººéƒ½é€Ÿé€Ÿçœ‹ã€‚ ä»¥åŠè¿™éƒ¨ç”µå½±éšä¹‹å¸¦æ¥äº†éå¸¸å¤šçš„çº¿ä¸‹é‡‡è®¿å’Œå®£å‘ï¼Œéƒ½éå¸¸çš„æœ‰æ„æ€ï¼Œä¸ªäººè§‰å¾— maybe è¿™æ‰æ˜¯ç²¾åã€‚</p><p>æ€»ä¹‹è¿™éƒ¨ç”µå½±å¸¦ç»™äººçš„æ„Ÿè§‰å°±æ˜¯æœ‰æƒæœ‰åŠ¿æœ‰æ¼”æŠ€çš„å¥³æ˜æ˜Ÿä»¬èšåœ¨ä¸€èµ·çš„çº¿ä¸Š playï¼Œçº¿ä¸‹æ¯ä¸ªäººä¹Ÿéƒ½å¾ˆæœ‰æ´»åŠ›å’Œé­…åŠ›ï¼Œå¤§æ¦‚å°±æ˜¯ç‹¬ç«‹æˆåŠŸå¥³æ€§çš„ç°å®çˆ½æ–‡ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å¾ˆå¿«ä¹äº†ã€‚</p><p>ä¸€äº›æœ‰æ„æ€çš„çº¿ä¸‹é‡‡è®¿ï¼š</p><ul><li> <a href="ã€ã€ä¸­å­—ã€‘The.Graham.Norton.Show.S23E11 ã€å‡¯ç‰¹å¸ƒå…°åˆ‡ç‰¹ã€‘ã€‘ https://www.bilibili.com/video/BV1hW411c7Uu/?share_source=copy_web&vd_source=65ec8981c0c50f7df1a335cd85471278"> The.Graham.Norton.Show.S23E11 </a></li><li> <a href="ã€ã€ä¸­æ–‡å­—å¹•ã€‘Ocean's 8 BBCé‡‡è®¿ è•‰è•‰å‡¯ç‰¹æ¡‘çˆªä¸‰äººç»„ï¼ˆ20 Jun 2018ï¼‰ã€‘ https://www.bilibili.com/video/BV12b411M7kD/?share_source=copy_web&vd_source=65ec8981c0c50f7df1a335cd85471278"> è•‰è•‰å‡¯ç‰¹æ¡‘çˆªä¸‰äººç»„ </a> </li></ul><style>.movie-info-container {  display: flex;  gap: 2rem;  align-items: flex-start;  margin: 1.5rem 0;}.movie-details {  flex: 2;}.movie-poster {  flex: 1;  text-align: center;}.movie-poster img {  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  object-fit: cover; /* ä¿æŒæ¯”ä¾‹ï¼Œè£å‰ªæº¢å‡ºéƒ¨åˆ† */}@media (max-width: 768px) {  .movie-info-container {    flex-direction: column;    gap: 1rem;  }  .movie-poster img {    width: 200px !important;    height: 300px !important;  }}</style><hr><p><em>æœ¬æ–‡ä¸ºä¸ªäººè§‚å½±æ„Ÿå—ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> å½±éŸ³ä¹¦è¯„ </category>
          
          <category> ç”µå½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå½± </tag>
            
            <tag> å‰§æƒ…ç‰‡ </tag>
            
            <tag> å–œå‰§ç‰‡ </tag>
            
            <tag> å…¨å¥³ä¸» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gumbel-Softmax</title>
      <link href="/2025/08/Gumbel-Softmax/"/>
      <url>/2025/08/Gumbel-Softmax/</url>
      
        <content type="html"><![CDATA[<p>èƒŒæ™¯ï¼šç¦»æ•£å†³ç­–ï¼ˆone-hot é€‰æ‹©ï¼‰æ˜¯ä¸å¯å¯¼çš„ï¼Œä¸èƒ½ç›´æ¥åœ¨ç¥ç»ç½‘ç»œé‡Œåå‘ä¼ æ’­æ¢¯åº¦ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š ç”¨ Gumbel-Softmax trick</p><h3 id="Gumbel-Softmax"><a href="#Gumbel-Softmax" class="headerlink" title="Gumbel-Softmax"></a>Gumbel-Softmax</h3><h4 id="æ™®é€š-softmax"><a href="#æ™®é€š-softmax" class="headerlink" title="æ™®é€š softmax:"></a>æ™®é€š softmax:</h4><script type="math/tex; mode=display">p_i = \frac{\exp(\text{logits}_i / \tau)}{\sum_j \exp(\text{logits}_j / \tau)}</script><ul><li><p><strong>å„ä¸ªç¬¦å·çš„å«ä¹‰</strong></p><ul><li><p><strong>logits<sub>i</sub></strong>ï¼š<br>æ¨¡å‹è¾“å‡ºçš„ç¬¬ i ç±»çš„â€åŸå§‹åˆ†æ•°â€ï¼Œè¿˜æ²¡æœ‰ç»è¿‡å½’ä¸€åŒ–ã€‚</p></li><li><p><strong>Ï„ (temperature, æ¸©åº¦å‚æ•°)</strong>ï¼š<br>æ§åˆ¶åˆ†å¸ƒçš„â€å¹³æ»‘ç¨‹åº¦â€ã€‚å½“ Ï„=1 æ—¶ï¼Œå°±æ˜¯æ™®é€šçš„ softmaxã€‚Ï„ è¶Šå¤§ï¼Œåˆ†å¸ƒè¶Šå¹³æ»‘ï¼Œæ¦‚ç‡è¶Šæ¥è¿‘å‡åŒ€åˆ†å¸ƒã€‚</p></li><li><p><strong>exp(Â·)</strong>ï¼š<br>æŒ‡æ•°å‡½æ•°ï¼ŒæŠŠåˆ†æ•°å˜æˆæ­£æ•°ã€‚</p></li><li><p><strong>åˆ†æ¯</strong>ï¼š<br>å¯¹æ‰€æœ‰ç±»åˆ«çš„æŒ‡æ•°å’Œæ±‚å’Œï¼Œç”¨æ¥åšå½’ä¸€åŒ–ï¼Œä¿è¯ç»“æœæ˜¯æ¦‚ç‡åˆ†å¸ƒã€‚</p></li><li><p><strong>ç»“æœ p<sub>i</sub></strong>ï¼š<br>è¿™æ˜¯ç¬¬ i ç±»çš„æ¦‚ç‡ï¼Œæ»¡è¶³ $\sum_i p_i = 1$ã€‚</p></li></ul></li></ul><hr><h4 id="Gumbel-Softmax-çš„å…¬å¼ï¼š"><a href="#Gumbel-Softmax-çš„å…¬å¼ï¼š" class="headerlink" title="Gumbel-Softmax çš„å…¬å¼ï¼š"></a>Gumbel-Softmax çš„å…¬å¼ï¼š</h4><script type="math/tex; mode=display">p_i = \frac{\exp(\text{logits}_i + g_i / \tau)}{\sum_j \exp(\text{logits}_j + g_j / \tau)}</script><p>åœ¨ logits ä¸ŠåŠ ä¸Š Gumbel å™ªå£°ï¼Œå† softmaxï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼š</p><h4 id="1-hard-False-è¿ç»­æ¨¡å¼"><a href="#1-hard-False-è¿ç»­æ¨¡å¼" class="headerlink" title="1. hard = False (è¿ç»­æ¨¡å¼)"></a>1. <code>hard = False</code> (è¿ç»­æ¨¡å¼)</h4><ul><li>è¾“å‡ºä¸€ä¸ªæ¦‚ç‡å‘é‡ï¼ˆç±»ä¼¼ soft one-hotï¼‰</li><li>æ¯”å¦‚ï¼š<code>[0.7, 0.2, 0.1]</code></li><li>è¿™ä¸ªè¾“å‡ºæ˜¯è¿ç»­çš„ï¼Œå¯ä»¥ç›´æ¥åå‘ä¼ æ’­æ¢¯åº¦</li><li>å¥½å¤„ï¼šå®Œå…¨å¯å¯¼ï¼Œå¯ä»¥ç”¨ä½œå¸¸è§„è®­ç»ƒ</li><li>ç¼ºç‚¹ï¼šä¸æ˜¯çœŸæ­£çš„ç¦»æ•£åŒ–ï¼Œæ¨¡å‹çœŸæ­£ä½¿ç”¨æ—¶å¯èƒ½è¡¨ç°ä¸åŒ</li></ul><h4 id="2-hard-True-ç¦»æ•£æ¨¡å¼"><a href="#2-hard-True-ç¦»æ•£æ¨¡å¼" class="headerlink" title="2. hard = True (ç¦»æ•£æ¨¡å¼)"></a>2. <code>hard = True</code> (ç¦»æ•£æ¨¡å¼)</h4><ul><li>åœ¨å‰å‘ä¼ æ’­æ—¶ï¼Œä¼šè¾“å‡ºâ€ç¡¬åŒ–â€ä¸º one-hotï¼Œæ¯”å¦‚ä¸Šé¢çš„æ•°æ®ä¼šå˜æˆï¼š<code>[1, 0, 0]</code></li><li>è¿™æ ·çœ‹èµ·æ¥åƒçœŸæ­£çš„ç¦»æ•£é€‰æ‹©</li><li>ä½†åœ¨åå‘ä¼ æ’­æ—¶ï¼Œä»ç„¶æ˜¯æŒ‰ç…§ soft ç‰ˆæœ¬çš„æ¢¯åº¦ï¼ˆå°±æ˜¯é‚£ä¸ª <code>[0.7, 0.2, 0.1]</code>ï¼‰- è¿™å« <strong>straight-through estimator</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è®¾ logits æ¥è‡ªä¸€ä¸ª 3 ç±»åˆ†ç±»å™¨</span></span><br><span class="line">logits = torch.tensor([[<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.1</span>]], requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">tau = <span class="number">1.0</span>  <span class="comment"># æ¸©åº¦å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------</span></span><br><span class="line"><span class="comment"># 1. hard=False ï¼ˆè½¯ one-hotï¼Œè¿ç»­æ¦‚ç‡åˆ†å¸ƒï¼‰</span></span><br><span class="line"><span class="comment"># ---------------------------</span></span><br><span class="line">y_soft = F.gumbel_softmax(logits, tau=tau, hard=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hard=False è¾“å‡º:&quot;</span>, y_soft)</span><br><span class="line"></span><br><span class="line">loss_soft = y_soft.<span class="built_in">sum</span>()   <span class="comment"># ç®€å•æ„é€ ä¸€ä¸ªæŸå¤±</span></span><br><span class="line">loss_soft.backward()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hard=False æ¢¯åº¦:&quot;</span>, logits.grad)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢¯åº¦æ¸…é›¶</span></span><br><span class="line">logits.grad.zero_()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------</span></span><br><span class="line"><span class="comment"># 2. hard=True ï¼ˆå‰å‘ one-hotï¼Œä½†æ¢¯åº¦æ¥è‡ª soft ç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="comment"># ---------------------------</span></span><br><span class="line">y_hard = F.gumbel_softmax(logits, tau=tau, hard=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nhard=True è¾“å‡º:&quot;</span>, y_hard)</span><br><span class="line"></span><br><span class="line">loss_hard = y_hard.<span class="built_in">sum</span>()</span><br><span class="line">loss_hard.backward()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hard=True æ¢¯åº¦:&quot;</span>, logits.grad)</span><br><span class="line"></span><br><span class="line"><span class="comment"># hard=False è¾“å‡º: tensor([[0.6591, 0.2479, 0.0930]], grad_fn=&lt;GumbelSoftmaxBackward&gt;)</span></span><br><span class="line"><span class="comment"># hard=False æ¢¯åº¦: tensor([[0., 0., 0.]])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hard=True è¾“å‡º: tensor([[1., 0., 0.]], grad_fn=&lt;GumbelSoftmaxBackward&gt;)</span></span><br><span class="line"><span class="comment"># hard=True æ¢¯åº¦: tensor([[0., 0., 0.]])</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é—¨æ§æ®‹å·®-GRN</title>
      <link href="/2025/08/%E9%97%A8%E6%8E%A7%E6%AE%8B%E5%B7%AE-GRN/"/>
      <url>/2025/08/%E9%97%A8%E6%8E%A7%E6%AE%8B%E5%B7%AE-GRN/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h2><p>GRN çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ®‹å·®è¿æ¥çš„â€œè·³è·ƒâ€è·¯å¾„ä¸é—¨æ§å•å…ƒçš„â€œå¼€å…³â€åŠŸèƒ½ç»“åˆèµ·æ¥ã€‚</p><h2 id="æ®‹å·®è¿æ¥ï¼ˆResidual-Connectionï¼‰"><a href="#æ®‹å·®è¿æ¥ï¼ˆResidual-Connectionï¼‰" class="headerlink" title="æ®‹å·®è¿æ¥ï¼ˆResidual Connectionï¼‰"></a>æ®‹å·®è¿æ¥ï¼ˆResidual Connectionï¼‰</h2><p>è¿™æ˜¯æ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰çš„æ ¸å¿ƒæ€æƒ³ã€‚å®ƒé€šè¿‡åœ¨ç½‘ç»œå±‚ä¹‹é—´æ·»åŠ ä¸€ä¸ªâ€œè·³è·ƒè¿æ¥â€ï¼ˆskip connectionï¼‰ï¼Œå°†å‰ä¸€å±‚çš„è¾“å…¥ç›´æ¥åŠ åˆ°åé¢å‡ å±‚çš„è¾“å‡ºä¸Šã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå³ä½¿æŸäº›å±‚å­¦åˆ°çš„ç‰¹å¾ä¸é‡è¦ï¼Œæ¢¯åº¦ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªâ€œæ·å¾„â€ç›´æ¥ä¼ å¯¼ï¼Œæœ‰æ•ˆç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œå¹¶è®©ç½‘ç»œæ›´å®¹æ˜“å­¦ä¹ åˆ°æ’ç­‰æ˜ å°„ï¼ˆidentity mappingï¼‰ï¼Œä»è€Œä½¿ç½‘ç»œå¯ä»¥è®­ç»ƒå¾—æ›´æ·±ã€‚</p><h2 id="é—¨æ§æœºåˆ¶ï¼ˆGating-Mechanismï¼‰"><a href="#é—¨æ§æœºåˆ¶ï¼ˆGating-Mechanismï¼‰" class="headerlink" title="é—¨æ§æœºåˆ¶ï¼ˆGating Mechanismï¼‰"></a>é—¨æ§æœºåˆ¶ï¼ˆGating Mechanismï¼‰</h2><p>é—¨æ§æœºåˆ¶é€šå¸¸ä½¿ç”¨ Sigmoid æˆ– Softmax ç­‰æ¿€æ´»å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ª 0 åˆ° 1 ä¹‹é—´çš„é—¨æ§å€¼ã€‚è¿™ä¸ªå€¼å°±åƒä¸€ä¸ªâ€œé—¨â€ï¼Œå¯ä»¥åŠ¨æ€åœ°æ§åˆ¶ä¿¡æ¯æµåŠ¨çš„æ¯”ä¾‹ã€‚å½“é—¨æ§å€¼ä¸º 1 æ—¶ï¼Œä¿¡æ¯å®Œå…¨é€šè¿‡ï¼›å½“é—¨æ§å€¼ä¸º 0 æ—¶ï¼Œä¿¡æ¯è¢«é˜»æ–­ã€‚è¿™ç§æœºåˆ¶è®©ç½‘ç»œå¯ä»¥è‡ªé€‚åº”åœ°å­¦ä¹ å“ªäº›ä¿¡æ¯æ˜¯é‡è¦çš„ï¼Œå¹¶åªè®©é‡è¦çš„ä¿¡æ¯æµå‘ä¸‹ä¸€å±‚ã€‚å…¸å‹çš„ä¾‹å­å°±æ˜¯é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰å’Œé—¨æ§å¾ªç¯å•å…ƒï¼ˆGRUï¼‰ã€‚</p><p>ç”¨å…¬å¼è¡¨ç¤ºçš„è¯ï¼Œä¸€ä¸ªå…¸å‹çš„ GRN æ¨¡å—å¯ä»¥å†™ä½œï¼š</p><script type="math/tex; mode=display">y = Gate(x) \odot F(x, W) + (1 - Gate(x)) \odot x</script>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠFleabagã€‹(ä¼¦æ•¦ç”Ÿæ´»)</title>
      <link href="/2025/08/fleabag/"/>
      <url>/2025/08/fleabag/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><div class="movie-info-container"><div class="movie-details">  <ul>      <li><strong>å¯¼æ¼”</strong>ï¼šè²æ¯”Â·æ²ƒå‹’-å¸ƒé‡Œå¥‡ï¼ˆPhoebe Waller-Bridgeï¼‰</li>      <li><strong>ä¸»æ¼”</strong> è²æ¯”Â·æ²ƒå‹’-å¸ƒé‡Œå¥‡ã€å®‰å¾·é²Â·æ–¯ç§‘ç‰¹ç­‰</li>      <li><strong>ä¸Šæ˜ æ—¶é—´</strong>ï¼š2016 å¹´</li>      <li><strong>è§‚çœ‹æ—¶é—´</strong>ï¼š2025 å¹´ 5 æœˆ</li>      <li><strong>è¯„åˆ†</strong> â­â­â­â­â­ (5/5)</li>  </ul></div><div class="movie-poster"><img src="/images/fleabag.png" alt="fleabag poster" width="250" height="370"></div></div><p>ä¼˜è´¨çš„äº’è”ç½‘å˜´æ›¿ï¼š</p><ul>    <li><a href="https://ahsmmy.typlog.io/episodes/s2-e09-e68891e4bbace983bde698afe3808ce5a4b1e8b4a5e3808de79a84e5a5b3e69d83e4b8bbe4b989e88085-e3808ae4" target="_blank"> æ’­å®¢ã€Šæ˜¯çŒ«å’ªå‘€ã€‹ </a> S2.E09 æˆ‘ä»¬éƒ½æ˜¯ã€Œå¤±è´¥ã€çš„å¥³æƒä¸»ä¹‰è€… | ã€Šä¼¦æ•¦ç”Ÿæ´»ã€‹</li>    <li><a href="https://podcasts.apple.com/cn/podcast/%E7%87%95%E5%A4%96%E4%B9%8B%E6%84%8F-%E4%BC%A6%E6%95%A6%E7%94%9F%E6%B4%BB-%E6%88%91%E7%9A%84%E5%AE%8C%E8%9B%8B%E4%BA%BA%E7%94%9F/id1620123449?i=1000681056441" target="_blank"> æ’­å®¢ã€Šç‡•å¤–ä¹‹æ„ã€‹ </a> ä¼¦æ•¦ç”Ÿæ´»ï¼Œæˆ‘çš„å®Œè›‹äººç”Ÿ </li></ul><p>ã€ŠFleabagã€‹æ˜¯ç™¾çœ‹ä¸åŒçš„å‰§é›†ï¼Œä¸åŒçš„å¿ƒå¢ƒå’Œå¹´é¾„çœ‹ä¼šæœ‰ä¸ä¸€æ ·çš„æ„Ÿå—ï¼Œå’Œã€ŠFriendsã€‹å¾ˆåƒï¼Œä½†æ˜¯æ•´ä½“çš„è‰²è°ƒæ›´è’è¯å’Œå­¤ç‹¬ï¼Œæ‰€ä»¥å°±æ„å¤–çš„å¾ˆé€‚åˆåŸå¸‚ç‹¬å±…å¥³æ€§ã€‚æœ‰è‡ªæˆ‘åŒæ¶ï¼Œå®¶åº­å†²çªï¼Œç•¸å½¢çš„å§å¦¹å’Œä¼´ä¾£å…³ç³»â€¦ ä½† Fleabag æ€»ç»™æˆ‘ç”Ÿç”Ÿä¸æ¯çš„ç”Ÿæ´»å¸Œæœ›å¯èƒ½æ˜¯è®©æˆ‘æ„è¯†åˆ°äº†å¾ˆå¤šäº‹æƒ… dosenâ€™t matterï¼Œç”Ÿæ´»å¯ä»¥å¾ˆè’è¯çš„è¿‡ä¸‹å»ï¼ˆä¸è¿‡ä¹Ÿæœ‰äººè¯´çœ‹å®Œæ›´ emo äº†ï¼Œhhï¼‰ã€‚</p><style>.movie-info-container {  display: flex;  gap: 2rem;  align-items: flex-start;  margin: 1.5rem 0;}.movie-details {  flex: 2;}.movie-poster {  flex: 1;  text-align: center;}.movie-poster img {  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  object-fit: cover; /* ä¿æŒæ¯”ä¾‹ï¼Œè£å‰ªæº¢å‡ºéƒ¨åˆ† */}@media (max-width: 768px) {  .movie-info-container {    flex-direction: column;    gap: 1rem;  }  .movie-poster img {    width: 200px !important;    height: 300px !important;  }}</style><hr><p><em>æœ¬æ–‡ä¸ºä¸ªäººè§‚å½±æ„Ÿå—ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> å½±éŸ³ä¹¦è¯„ </category>
          
          <category> ç”µè§†å‰§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰§æƒ…ç‰‡ </tag>
            
            <tag> è‹±å‰§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP çŠ¶æ€ç </title>
      <link href="/2025/08/HTTP_status_code/"/>
      <url>/2025/08/HTTP_status_code/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ªäººå¯¹äºè‡ªå·±å¸¸è§ä½†ä¸ç†Ÿæ‚‰çš„-HTTP-çŠ¶æ€ç çš„æ€»ç»“"><a href="#ä¸ªäººå¯¹äºè‡ªå·±å¸¸è§ä½†ä¸ç†Ÿæ‚‰çš„-HTTP-çŠ¶æ€ç çš„æ€»ç»“" class="headerlink" title="ä¸ªäººå¯¹äºè‡ªå·±å¸¸è§ä½†ä¸ç†Ÿæ‚‰çš„ HTTP çŠ¶æ€ç çš„æ€»ç»“"></a>ä¸ªäººå¯¹äºè‡ªå·±å¸¸è§ä½†ä¸ç†Ÿæ‚‰çš„ HTTP çŠ¶æ€ç çš„æ€»ç»“</h2><h3 id="304"><a href="#304" class="headerlink" title="304"></a>304</h3><p>HTTP çŠ¶æ€ç  304 è¡¨ç¤ºâ€æœªä¿®æ”¹â€ã€‚å®ƒè¡¨ç¤ºè¯·æ±‚çš„èµ„æºè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æ²¡æœ‰å˜åŒ–ï¼Œå…è®¸æµè§ˆå™¨ä½¿ç”¨å…¶ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯é‡æ–°ä¸‹è½½ã€‚è¿™æœ‰åŠ©äºèŠ‚çœå¸¦å®½å¹¶åŠ å¿«åŠ è½½æ—¶é—´ã€‚</p><hr><h3 id="504"><a href="#504" class="headerlink" title="504"></a>504</h3><p>504 ç½‘å…³è¶…æ—¶é”™è¯¯å‘ç”Ÿåœ¨ç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨æœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°å“åº”æ—¶ã€‚æ­¤é—®é¢˜é€šå¸¸ç”±æœåŠ¡å™¨ç«¯è¿æ¥é—®é¢˜å¼•èµ·ï¼Œä½†å¶å°”ä¹Ÿä¼šå—å®¢æˆ·ç«¯é…ç½®å½±å“ã€‚</p><h4 id="å¸¸è§åŸå› "><a href="#å¸¸è§åŸå› " class="headerlink" title="å¸¸è§åŸå› "></a>å¸¸è§åŸå› </h4><ul><li><p>ä¸Šæ¸¸æœåŠ¡å™¨å®•æœºæˆ–è¿‡è½½ã€‚</p></li><li><p>æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥é—®é¢˜ã€‚</p></li><li><p>DNS é…ç½®ä¸æ­£ç¡®æˆ– DNS è®°å½•å·²è¿‡æœŸã€‚</p></li><li><p>é˜²ç«å¢™æˆ–ä»£ç†é…ç½®é”™è¯¯å¯¼è‡´è¯·æ±‚è¢«é˜»æ­¢ã€‚</p></li></ul><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>4xxï¼ˆ<strong>å®¢æˆ·ç«¯</strong>é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆã€‚</p><p>5xxï¼ˆ<strong>æœåŠ¡å™¨</strong>é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠKilling Eveã€‹(æ€æ­»ä¼ŠèŠ™)</title>
      <link href="/2025/08/killing_eve/"/>
      <url>/2025/08/killing_eve/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><div class="movie-info-container"><div class="movie-details">  <ul>      <li><strong>å¯¼æ¼”</strong>ï¼šæ¯ä¸€å­£éƒ½åœ¨æ¢ï¼ˆå»è±†ç“£ or wikiæŸ¥å§ï¼‰</li>      <li><strong>ä¸»æ¼”</strong>ï¼šæœ±è¿ªÂ·ç§‘é»˜ã€å´çŠå“ç­‰</li>      <li><strong>ä¸Šæ˜ æ—¶é—´</strong>ï¼š2018 å¹´</li>      <li><strong>è§‚çœ‹æ—¶é—´</strong>ï¼š2025 å¹´ 5 æœˆ 17 æ—¥</li>      <li><strong>è¯„åˆ†</strong> â­â­â­â­â­ (5/5)</li>  </ul></div><div class="movie-poster"><img src="/images/killing-eve-poster.png" alt="æ€æ­»ä¼ŠèŠ™æµ·æŠ¥" width="250" height="370">Killing eve å€¼å¾—æ›´å¥½çš„ç»“å±€ã€‚</div></div><p>å¤ªå¤ªå¤ªå¤ªå–œæ¬¢äº†â€¦ï¼Œæƒ³æ³•å¤ªå¤šäº†ï¼Œåƒè¨€ä¸‡ç»ªè¯´ä¸å®Œï¼Œæ‰¾äº†ä¸€äº›ä¼˜è´¨çš„äº’è”ç½‘å˜´æ›¿ã€‚</p><ul>  <li><a href="https://ahsmmy.typlog.io/episodes/s2-e02e3808akilling-evee3808be8afb7e694bee8bf87e8bf99e59cbae796afe78b82e38081e6b5aae6bcabe38081e6b7b" target="_blank"> æ’­å®¢èŠ‚ç›®ï¼š æ˜¯çŒ«å’ªå‘€ </a></li>  <li><a href="https://b23.tv/YIfsoIu" target="_blank"> å‰ªè¾‘ killing eve x fortnight </a>æ²¡æœ‰æƒ³åˆ°fortnight æ­Œè¯å’Œ killing eve æ„å¤–çš„å¾ˆæ­ã€‚</li> </ul><p>çœ‹å®Œå–œæ¬¢æœ±è¿ªÂ·ç§‘é»˜çš„ä¹Ÿè¯·å»æ”¯æŒä¸€ä¸‹å¥¹çš„èˆå°å‰§ä½œå“ï¼š<a href="https://movie.douban.com/subject/35861791/" target="_blank">ã€Šåˆæ­¥ä¸¾è¯ã€‹</a></p><style>.movie-info-container {  display: flex;  gap: 2rem;  align-items: flex-start;  margin: 1.5rem 0;}.movie-details {  flex: 2;}.movie-poster {  flex: 1;  text-align: center;}.movie-poster img {  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  object-fit: cover; /* ä¿æŒæ¯”ä¾‹ï¼Œè£å‰ªæº¢å‡ºéƒ¨åˆ† */}@media (max-width: 768px) {  .movie-info-container {    flex-direction: column;    gap: 1rem;  }  .movie-poster img {    width: 200px !important;    height: 300px !important;  }}</style><hr><p><em>æœ¬æ–‡ä¸ºä¸ªäººè§‚å½±æ„Ÿå—ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> å½±éŸ³ä¹¦è¯„ </category>
          
          <category> ç”µè§†å‰§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰§æƒ…ç‰‡ </tag>
            
            <tag> è‹±å‰§ </tag>
            
            <tag> åŒå¥³ä¸» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠOcean&#39;s Elevenã€‹(åä¸€ç½—æ±‰)</title>
      <link href="/2025/08/%E5%8D%81%E4%B8%80%E7%BD%97%E6%B1%89/"/>
      <url>/2025/08/%E5%8D%81%E4%B8%80%E7%BD%97%E6%B1%89/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><div class="movie-info-container"><div class="movie-details">  <ul>      <li><strong>å¯¼æ¼”</strong>ï¼šå²è’‚æ–‡Â·ç´¢å¾·ä¼¯æ ¼</li>      <li><strong>ä¸»æ¼”</strong>ï¼šä¹”æ²»Â·å…‹é²å°¼ã€å¸ƒæ‹‰å¾·Â·çš®ç‰¹ã€é©¬ç‰¹Â·è¾¾è’™ã€æœ±è‰å¨…Â·ç½—ä¼¯èŒ¨ã€å‡¯ç‘Ÿç³Â·æ³½å¡”-ç¼æ–¯</li>      <li><strong>ä¸Šæ˜ æ—¶é—´</strong>ï¼š2001 å¹´</li>      <li><strong>è§‚çœ‹æ—¶é—´</strong>ï¼š2025 å¹´ 8 æœˆ 16 æ—¥</li>      <li><strong>è¯„åˆ†</strong> â­â­â­â˜†â˜† (3/5)</li>  </ul></div><div class="movie-poster"><img src="/images/oceans-eleven-poster.png" alt="åä¸€ç½—æ±‰æµ·æŠ¥" width="250" height="370"></div></div><p>å†²ç€èŒ±è‰äºšÂ·ç½—ä¼¯èŒ¨å»çœ‹çš„ï¼Œç»“æœæ˜¯èŠ±ç“¶ç¾å¥³çš„è§’è‰²ï¼Œå¯èƒ½æ˜¯ç”±äºå…ˆçœ‹äº† <a href="https://en.wikipedia.org/wiki/Ocean%27s_8">Ocean 8</a>ï¼ŒäºŒè€…é£æ ¼æ¯”è¾ƒç›¸ä¼¼ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å¤ªå¤šçš„æƒŠå–œã€‚ ä¸è¿‡ä¼—æ˜Ÿäº‘é›†ï¼Œå‰§æƒ…å’Œéƒ¨åˆ†äººç‰©å¡‘é€ éƒ½è¿˜ä¸é”™ã€‚æ€»ä½“ä¸Šç®—æ˜¯ä¸é”™çš„çˆ†ç±³èŠ±ç”µå½±ã€‚</p><style>.movie-info-container {  display: flex;  gap: 2rem;  align-items: flex-start;  margin: 1.5rem 0;}.movie-details {  flex: 2;}.movie-poster {  flex: 1;  text-align: center;}.movie-poster img {  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  object-fit: cover; /* ä¿æŒæ¯”ä¾‹ï¼Œè£å‰ªæº¢å‡ºéƒ¨åˆ† */}@media (max-width: 768px) {  .movie-info-container {    flex-direction: column;    gap: 1rem;  }  .movie-poster img {    width: 200px !important;    height: 300px !important;  }}</style><hr><p><em>æœ¬æ–‡ä¸ºä¸ªäººè§‚å½±æ„Ÿå—ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> å½±éŸ³ä¹¦è¯„ </category>
          
          <category> ç”µå½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå½± </tag>
            
            <tag> å‰§æƒ…ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SD-Turbo</title>
      <link href="/2025/08/SD-turbo/"/>
      <url>/2025/08/SD-turbo/</url>
      
        <content type="html"><![CDATA[<ol><li><p><strong>ç”Ÿæˆé€Ÿåº¦ (Generation Speed)</strong></p><p>SD-Turbo: å®ç°äº†å•æ­¥å›¾åƒç”Ÿæˆã€‚è¿™æ„å‘³ç€å®ƒåªéœ€è¦ä¸€æ¬¡ç½‘ç»œå‰å‘ä¼ æ’­å°±èƒ½è¾“å‡ºæœ€ç»ˆå›¾åƒï¼Œå¤§å¤§ç¼©çŸ­äº†ç”Ÿæˆæ—¶é—´ï¼Œä½¿å…¶é€‚ç”¨äºå®æ—¶äº¤äº’åº”ç”¨ã€‚<br>å…¶ä»–æ‰©æ•£æ¨¡å‹ (å¦‚ Stable Diffusion 1.5/2.1, SDXL): é€šå¸¸éœ€è¦ä¸€ä¸ªè¿­ä»£çš„â€œå»å™ªâ€è¿‡ç¨‹ï¼Œæ­¥æ•°ï¼ˆStepsï¼‰ä¸€èˆ¬è®¾ç½®åœ¨ 20 åˆ° 50 æ­¥ä¹‹é—´ã€‚æ­¥æ•°è¶Šå¤šï¼Œç»†èŠ‚é€šå¸¸è¶Šå¥½ï¼Œä½†è€—æ—¶ä¹Ÿè¶Šé•¿ã€‚</p></li><li><p><strong>å®ç°æŠ€æœ¯ (Underlying Technology)</strong></p><p>SD-Turbo: é‡‡ç”¨äº†ä¸€ç§åä¸ºå¯¹æŠ—æ€§æ‰©æ•£è’¸é¦ (Adversarial Diffusion Distillation, ADD) çš„æ–°æŠ€æœ¯ã€‚<br>å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ç§â€œæ¨¡å‹è’¸é¦â€æŠ€æœ¯ã€‚å®ƒæœ‰ä¸€ä¸ªå¼ºå¤§çš„â€œæ•™å¸ˆæ¨¡å‹â€ï¼ˆåŸºäº SD 2.1ï¼‰ï¼ŒSD-Turbo ä½œä¸ºâ€œå­¦ç”Ÿæ¨¡å‹â€æ¥å­¦ä¹ æ•™å¸ˆçš„ç”Ÿæˆèƒ½åŠ›ã€‚<br>ä¸ä¼ ç»Ÿè’¸é¦ä¸åŒï¼Œå®ƒå¼•å…¥äº†å¯¹æŠ—æ€§è®­ç»ƒï¼ˆç±»ä¼¼ GANsï¼‰ï¼Œæœ‰ä¸€ä¸ªåˆ¤åˆ«å™¨æ¥åˆ¤æ–­ç”Ÿæˆå›¾åƒçš„çœŸä¼ªï¼Œè¿™è¿«ä½¿ SD-Turbo å­¦ä¼šåœ¨å•æ­¥å†…å°±ç”Ÿæˆéå¸¸é€¼çœŸçš„å›¾åƒã€‚<br>å…¶ä»–æ‰©æ•£æ¨¡å‹: ä½¿ç”¨çš„æ˜¯æ‰©æ•£ä¸å»å™ªï¼ˆDenoising Diffusion Probabilistic Models, DDPMï¼‰åŸç†ã€‚é€šè¿‡ä¸€ä¸ªé€æ­¥æ·»åŠ å™ªå£°çš„å‰å‘è¿‡ç¨‹å’Œä¸€ä¸ªé€æ­¥å»é™¤å™ªå£°çš„åå‘è¿‡ç¨‹æ¥ç”Ÿæˆå›¾åƒï¼Œè¿™ä¸ªåå‘è¿‡ç¨‹å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„é‡‡æ ·ï¼ˆsamplingï¼‰ã€‚</p></li><li><p><strong>å›¾åƒè´¨é‡ä¸ç»†èŠ‚ (Image Quality &amp; Detail)</strong></p><p>SD-Turbo: åœ¨å•æ­¥ç”Ÿæˆçš„å‰æä¸‹ï¼Œå›¾åƒè´¨é‡éå¸¸æƒŠäººï¼Œä½†åœ¨ç²¾ç»†çš„ç»†èŠ‚ã€å¤æ‚æ„å›¾å’Œå¯¹æç¤ºè¯ï¼ˆPromptï¼‰çš„ç²¾ç¡®ç†è§£ä¸Šï¼Œå¯èƒ½ç•¥é€Šäºç»è¿‡å¤šæ­¥è¿­ä»£çš„é¡¶çº§æ¨¡å‹ï¼ˆå¦‚ SDXLï¼‰ã€‚å®ƒåœ¨é€Ÿåº¦å’Œè´¨é‡ä¹‹é—´åšäº†ä¸€ä¸ªæè‡´çš„å¹³è¡¡ã€‚<br>å…¶ä»–æ‰©æ•£æ¨¡å‹: å¯ä»¥é€šè¿‡å¢åŠ è¿­ä»£æ­¥æ•°æ¥æå‡å›¾åƒçš„ç»†èŠ‚å’Œä¸€è‡´æ€§ï¼Œé€šå¸¸èƒ½å¤Ÿæ›´å¥½åœ°éµå¾ªå¤æ‚çš„æç¤ºè¯ã€‚SDXL åœ¨è¿™æ–¹é¢å°¤å…¶å‡ºè‰²ã€‚</p></li><li><p><strong>ä½¿ç”¨æ–¹å¼ (Usage)</strong></p><p>SD-Turbo: åœ¨ä½¿ç”¨æ—¶ï¼Œé€šå¸¸ä¸éœ€è¦æˆ–ä¸æ¨èä½¿ç”¨ guidance_scale (CFG) å’Œ negative_promptã€‚å› ä¸ºå®ƒçš„æ¨¡å‹è®¾è®¡å°±æ˜¯ä¸ºäº†åœ¨å•æ­¥å†…ç›´æ¥ç”Ÿæˆï¼Œæ²¡æœ‰å¤šæ­¥è¿­ä»£çš„è¿‡ç¨‹ç»™è¿™äº›å‚æ•°æ¥å¼•å¯¼ã€‚é€šå¸¸ä¼šå°† guidance_scale è®¾ç½®ä¸º 0ã€‚<br>å…¶ä»–æ‰©æ•£æ¨¡å‹: guidance_scale å’Œ negative_prompt æ˜¯éå¸¸é‡è¦çš„æ§åˆ¶æ‰‹æ®µï¼Œç”¨æ¥å¢å¼ºæç¤ºè¯çš„ç›¸å…³æ€§å¹¶é¿å…ä¸å¸Œæœ›å‡ºç°çš„å…ƒç´ ã€‚</p></li></ol><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://huggingface.co/stabilityai/sd-turbo">SD-Turbo huggingface</a></p>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Alignment Module</title>
      <link href="/2025/08/AlignmentModule/"/>
      <url>/2025/08/AlignmentModule/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„-Alignment-Module-è®¾è®¡"><a href="#è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„-Alignment-Module-è®¾è®¡" class="headerlink" title="è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ Alignment Module è®¾è®¡"></a>è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ Alignment Module è®¾è®¡</h2><p>ç›®æ ‡ï¼šå°†è§†è§‰ç‰¹å¾ä¸æ–‡æœ¬æˆ–å…¶ä»–æ¨¡æ€çš„ç‰¹å¾ç©ºé—´å¯¹é½ï¼Œä»¥å®ç°å¤šæ¨¡æ€ç†è§£æˆ–æå‡è§†è§‰æ¨ç†èƒ½åŠ›ã€‚</p><h3 id="FaithDiff"><a href="#FaithDiff" class="headerlink" title="FaithDiff"></a>FaithDiff</h3><p><img src="/images/FaithDiff.png" alt="FaithDiff alignment Module"><br>ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è¡¥å…… LQ å›¾åƒä¿¡æ¯ï¼Œéœ€è¦å°† LQ ä¿¡æ¯æ³¨å…¥åˆ°æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œä½†æ˜¯ç”±äº LQ å›¾åƒå’Œ noisy latnet $x_t^{HQ}$ ä¹‹é—´å­˜åœ¨ gapï¼Œç›´æ¥ç›¸åŠ æ˜¯ä¸å¤§åˆç†çš„ï¼Œæ‰€ä»¥è®¾è®¡ <code>Alignment Module</code> å°† LQ å›¾åƒå’Œ $x_t^{HQ}$ è¿›è¡Œå¯¹é½ï¼Œç„¶åè¾“å…¥åˆ°æ¨¡å‹ä¸­ã€‚<br>å…·ä½“æ¥è¯´ï¼ŒFaithDiff ä¸­çš„ Alignment Module è®¾è®¡å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{align}f_t^x &= \text{Conv}(x_t^{HQ}), \\f^m &= \text{Conv}(f^{LQ}), \\f_t^c &= \text{Concat}(f_t^x, f^m), \\\text{Trans}(f_t^c) &= \mathcal{T}_2(\mathcal{T}_1(f_t^c)), \\f_t^a &= \text{Linear}(\text{Trans}(f_t^c) + f_t^x),\end{align}</script><p>å…¶ä¸­ $\mathcal{T}$ æ˜¯ Transformer Block, å¯¹åº”çš„ <a href="https://github.com/JyChen9811/FaithDiff/issues/16">Alignment Module</a> çš„ä»£ç ä½ç½®</p><h3 id="IP-Adapter"><a href="#IP-Adapter" class="headerlink" title="IP-Adapter"></a>IP-Adapter</h3><p><img src="/images/IPadapter.png" alt="IP-Adapter"></p><p>IP-Adapter é€šè¿‡è§£è€¦çš„ä¸¤ä¸ª Cross-Attention åˆ†åˆ«èåˆå›¾åƒä¿¡æ¯å’Œæ–‡æœ¬ä¿¡æ¯ï¼Œå…¶ä¸­å›¾åƒä¿¡æ¯é€šè¿‡ <code>Image-Conditioned Attention</code> è¿›è¡Œèåˆï¼Œæ–‡æœ¬ä¿¡æ¯é€šè¿‡ <code>Text-Conditioned Attention</code> è¿›è¡Œèåˆã€‚è¿™ç§æ–¹å¼ä¸ä¼šè®©å›¾åƒå’Œæ–‡æœ¬ä¿¡æ¯ç›¸äº’å¹²æ‰°ï¼Œåœ¨ä¿¡æ¯ä¼ é€’çš„è¿‡ç¨‹ä¸­å¯ä»¥ä¾æ¬¡æå–æ‰€éœ€è¦çš„å›¾åƒå’Œæ–‡æœ¬ä¿¡æ¯ã€‚</p><h3 id="DAEFR"><a href="#DAEFR" class="headerlink" title="DAEFR"></a>DAEFR</h3><p><img src="/images/DAEFR.png" alt="DAEFR"></p><p>DAEFR é‡‡ç”¨ CLIP çš„æ–¹å¼ï¼Œåœ¨ (b) Association Stage å¯¹é½ LQ å’Œ HQï¼Œåç»­é‡‡ç”¨ Attention æœºåˆ¶å°† LQ å’Œ HQ ä¿¡æ¯è¿›è¡Œèåˆã€‚</p><h2 id="å‚è€ƒè®ºæ–‡"><a href="#å‚è€ƒè®ºæ–‡" class="headerlink" title="å‚è€ƒè®ºæ–‡"></a>å‚è€ƒè®ºæ–‡</h2><ul><li><a href="https://arxiv.org/abs/2411.18824">FaithDiff: Unleashing Diffusion Models for Faithful Text-to-Image Generation</a></li><li><a href="https://arxiv.org/abs/2308.06721">IP-Adapter: Text Compatible Image Prompt Adapter for Text-to-Image Diffusion Models</a></li><li><a href="https://arxiv.org/pdf/2308.07314">DAEFR: DUAL ASSOCIATED ENCODER FOR FACE RESTORATION</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Module </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/08/hello-world/"/>
      <url>/2025/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼è¿™æ˜¯ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚</p><span id="more"></span><p>è¿™é‡Œæ˜¯æ–‡ç« çš„è¯¦ç»†å†…å®¹â€¦</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
